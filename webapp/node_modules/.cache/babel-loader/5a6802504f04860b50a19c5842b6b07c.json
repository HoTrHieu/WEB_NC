{"ast":null,"code":"var _jsxFileName = \"/Users/hieu/Documents/HCMUS_FIT/WEB_NC/webapp/src/modules/admin/UserManageComponent.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Table, Form, Switch } from 'antd';\nimport { UserService } from '../user/UserService';\nimport { EntityStatus } from '../../shared/enums/EntityStatus';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function UserManageComponent(props) {\n  _s();\n\n  var _userList$data;\n\n  const {\n    userList,\n    currentRole,\n    handleChange\n  } = props || {};\n  const [form] = Form.useForm();\n  const [pagination, setPagination] = useState({\n    pageSize: userList.data.pageSize,\n    page: userList.data.page,\n    total: userList.data.total\n  });\n\n  const changeStatus = value => {\n    const {\n      id,\n      status\n    } = value;\n    console.log(status);\n    const newStatus = status === 1 ? EntityStatus.DISABLED : EntityStatus.ACTIVE;\n    const res = UserService.updateStatus({\n      id,\n      newStatus\n    });\n  };\n\n  const columns = [{\n    title: \"ID\",\n    dataIndex: \"id\",\n    editable: false\n  }, {\n    title: \"USER NAME\",\n    dataIndex: \"username\",\n    editable: false\n  }, {\n    title: \"FIRST NAME\",\n    dataIndex: \"firstName\",\n    editable: false\n  }, {\n    title: \"LAST NAME\",\n    dataIndex: \"lastName\",\n    editable: false\n  }, {\n    title: \"EMAIL\",\n    dataIndex: \"email\",\n    editable: false\n  }, {\n    title: \"STATUS\",\n    dataIndex: \"status\",\n    editable: true,\n    render: (_, record) => {\n      return /*#__PURE__*/_jsxDEV(Switch, {\n        defaultChecked: record.status === 1,\n        onChange: () => changeStatus(record)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 16\n      }, this);\n    }\n  }, {\n    title: \"CREATED DATE\",\n    dataIndex: \"createdDate\",\n    editable: false\n  }];\n  const mergedColumns = columns.map(col => {\n    if (!col.editable) {\n      return col;\n    }\n\n    return { ...col,\n      onCell: record => ({\n        record,\n        dataIndex: col.dataIndex,\n        title: col.title\n      })\n    };\n  });\n\n  const handleTableChange = (newPagination, filters, sorter) => {\n    // console.log({newPagination, filters, sorter})\n    // setPagination({\n    //   ...pagination,\n    //   page: newPagination.current\n    // })\n    handleChange({\n      page: newPagination.current,\n      pageSize: 10,\n      role: currentRole.role\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    form: form,\n    component: false,\n    children: /*#__PURE__*/_jsxDEV(Table, {\n      columns: mergedColumns,\n      loading: userList.loading || !!userList.error,\n      dataSource: (_userList$data = userList.data) === null || _userList$data === void 0 ? void 0 : _userList$data.items,\n      pagination: pagination,\n      onChange: handleTableChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n}\n\n_s(UserManageComponent, \"Gn2FGi31Iaa9oOcVzQgwTKy7yD0=\", false, function () {\n  return [Form.useForm];\n});\n\n_c = UserManageComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserManageComponent\");","map":{"version":3,"sources":["/Users/hieu/Documents/HCMUS_FIT/WEB_NC/webapp/src/modules/admin/UserManageComponent.tsx"],"names":["React","useState","Table","Form","Switch","UserService","EntityStatus","UserManageComponent","props","userList","currentRole","handleChange","form","useForm","pagination","setPagination","pageSize","data","page","total","changeStatus","value","id","status","console","log","newStatus","DISABLED","ACTIVE","res","updateStatus","columns","title","dataIndex","editable","render","_","record","mergedColumns","map","col","onCell","handleTableChange","newPagination","filters","sorter","current","role","loading","error","items"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\nimport { Table, Form, Switch, Pagination } from 'antd';\nimport { UserService } from '../user/UserService'\nimport { EntityStatus } from '../../shared/enums/EntityStatus';\n\nexport function UserManageComponent(props: any) {\n  const {userList, currentRole, handleChange} = props || {};\n  const [form] = Form.useForm();\n  const [pagination, setPagination] = useState({\n    pageSize: userList.data.pageSize,\n    page: userList.data.page,\n    total: userList.data.total\n  })\n\n  const changeStatus = (value: any)=> {\n    const {id, status} = value;\n    console.log(status)\n    const newStatus = status === 1 ? EntityStatus.DISABLED : EntityStatus.ACTIVE;\n    const res = UserService.updateStatus({id, newStatus})\n  }\n\n  const columns = [\n    {\n      title: \"ID\", \n      dataIndex: \"id\",\n      editable: false,\n    },\n    {\n      title: \"USER NAME\",\n      dataIndex: \"username\",\n      editable: false,\n    },\n    {\n      title: \"FIRST NAME\",\n      dataIndex: \"firstName\",\n      editable: false,\n    },\n    {\n      title: \"LAST NAME\",\n      dataIndex: \"lastName\",\n      editable: false,\n    },\n    {\n      title: \"EMAIL\",\n      dataIndex: \"email\",\n      editable: false,\n    },\n    {\n      title: \"STATUS\",\n      dataIndex: \"status\",\n      editable: true,\n      render: (_: any, record: any) => {\n        return <Switch defaultChecked={record.status === 1} onChange={() => changeStatus(record)} />\n      }\n    },\n    {\n      title: \"CREATED DATE\",\n      dataIndex: \"createdDate\",\n      editable: false,\n    }\n  ]\n\n  const mergedColumns = columns.map(col => {\n    if (!col.editable) {\n      return col;\n    }\n    return {\n      ...col,\n      onCell: (record: any) => ({\n        record,\n        dataIndex: col.dataIndex,\n        title: col.title,\n      }),\n    };\n  });\n\n  const handleTableChange = (newPagination: any, filters: any, sorter: any) => {\n    // console.log({newPagination, filters, sorter})\n    // setPagination({\n    //   ...pagination,\n    //   page: newPagination.current\n    // })\n    handleChange({\n      page: newPagination.current,\n      pageSize: 10,\n      role: currentRole.role\n    })\n  };\n\n  return (\n    <Form form={form} component={false}>\n      <Table \n        columns={mergedColumns}\n        loading={userList.loading || !!userList.error} \n        dataSource={userList.data?.items}\n        pagination={pagination}\n        onChange={handleTableChange}\n      />      \n      {/* <Pagination defaultCurrent={1} total={50} /> */}\n    </Form>\n\n  )\n}"]},"metadata":{},"sourceType":"module"}