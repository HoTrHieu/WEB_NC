{"ast":null,"code":"var _jsxFileName = \"/Users/hieu/Documents/HCMUS_FIT/WEB_NC/webapp/src/modules/admin/AdminPage.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback } from 'react';\nimport { MenuUnfoldOutlined, MenuFoldOutlined, TeamOutlined, ReadFilled, UserOutlined } from '@ant-design/icons';\nimport { useHistory } from 'react-router';\nimport { useQuery } from \"../../shared/hooks/useQuery.hook\";\nimport { Menu, Button, Table, Popconfirm, Typography, Form, Input, InputNumber } from 'antd';\nimport { UserService } from '../user/UserService';\nimport { UserRole } from '../../shared/enums/UserRole';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Column,\n  ColumnGroup\n} = Table;\n\nconst EditableCell = ({\n  editing,\n  dataIndex,\n  title,\n  inputType,\n  record,\n  index,\n  children,\n  ...restProps\n}) => {\n  const inputNode = inputType === 'number' ? /*#__PURE__*/_jsxDEV(InputNumber, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 46\n  }, this) : /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 64\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"td\", { ...restProps,\n    children: editing ? /*#__PURE__*/_jsxDEV(Form.Item, {\n      name: dataIndex,\n      style: {\n        margin: 0\n      },\n      rules: [{\n        required: true,\n        message: `Please Input ${title}!`\n      }],\n      children: inputNode\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }, this) : children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n};\n\n_c = EditableCell;\nexport function AdminPage(props) {\n  _s();\n\n  var _userList$data;\n\n  const history = useHistory();\n  const [collapsed, setCollapsed] = useState(false);\n  const [req, setReq] = useState({\n    page: 1,\n    pageSize: 10,\n    role: UserRole.TEACHER\n  });\n  const [form] = Form.useForm();\n  const [editingId, setEditingId] = useState('');\n\n  const isEditing = record => record.id === editingId;\n\n  const userList = useQuery(useCallback(() => UserService.search(req), [req]));\n\n  const edit = record => {\n    form.setFieldsValue({\n      username: '',\n      firstName: '',\n      lastName: '',\n      email: '',\n      ...record\n    });\n    setEditingId(record.id);\n  };\n\n  const cancel = () => {\n    setEditingId('');\n  };\n\n  const save = async id => {// try {\n    //   const row = (await form.validateFields()) as any;\n    //   const newData = [...userList.data?.items];\n    //   const index = newData.findIndex(item => id === item.id);\n    //   if (index > -1) {\n    //     const item = newData[index];\n    //     newData.splice(index, 1, {\n    //       ...item,\n    //       ...row,\n    //     });\n    //     setData(newData);\n    //     setEditingKey('');\n    //   } else {\n    //     newData.push(row);\n    //     setData(newData);\n    //     setEditingKey('');\n    //   }\n    // } catch (errInfo) {\n    //   console.log('Validate Failed:', errInfo);\n    // }\n    //const row = (await form.validateFields()) as any;\n    // const newData = [...userList.data?.item];\n    //console.log('showr: ', row)\n  };\n\n  const columns = [{\n    title: \"ID\",\n    dataIndex: \"id\",\n    editable: false\n  }, {\n    title: \"USER NAME\",\n    dataIndex: \"username\",\n    editable: true\n  }, {\n    title: \"FIRST NAME\",\n    dataIndex: \"firstName\",\n    editable: true\n  }, {\n    title: \"LAST NAME\",\n    dataIndex: \"lastName\",\n    editable: true\n  }, {\n    title: \"EMAIL\",\n    dataIndex: \"email\",\n    editable: true\n  }, {\n    title: \"STATUS\",\n    dataIndex: \"status\",\n    editable: true\n  }, {\n    title: \"CREATED DATE\",\n    dataIndex: \"createdDate\",\n    editable: false\n  }, {\n    title: 'Action',\n    dataIndex: 'id',\n    render: (_, record) => {\n      const editable = isEditing(record);\n      console.log('innn: ', editable);\n      return editable ? /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          onClick: () => save(record.id),\n          style: {\n            marginRight: 8\n          },\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n          title: \"Sure to cancel?\",\n          onConfirm: cancel,\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Typography.Link, {\n        disabled: editingId !== '',\n        onClick: () => edit(record),\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }, this);\n    }\n  }];\n  const mergedColumns = columns.map(col => {\n    if (!col.editable) {\n      return col;\n    }\n\n    return { ...col,\n      onCell: record => ({\n        record,\n        inputType: col.dataIndex === 'status' ? 'number' : 'text',\n        dataIndex: col.dataIndex,\n        title: col.title,\n        editing: isEditing(record)\n      })\n    };\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex space-x-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: () => setCollapsed(!collapsed),\n        style: {\n          marginBottom: 16\n        },\n        children: /*#__PURE__*/React.createElement(collapsed ? MenuUnfoldOutlined : MenuFoldOutlined)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu, {\n        defaultSelectedKeys: [props.location.pathname],\n        defaultOpenKeys: ['admin/students'],\n        mode: \"inline\",\n        theme: \"dark\",\n        onSelect: e => history.push(e.key),\n        inlineCollapsed: collapsed,\n        children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n          icon: /*#__PURE__*/_jsxDEV(TeamOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 52\n          }, this),\n          children: \"Qu\\u1EA3n l\\xFD h\\u1ECDc vi\\xEAn\"\n        }, \"/admin/students\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n          icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 52\n          }, this),\n          children: \"Qu\\u1EA3n l\\xFD gi\\u1EA3ng vi\\xEAn\"\n        }, \"/admin/teachers\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n          icon: /*#__PURE__*/_jsxDEV(ReadFilled, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 51\n          }, this),\n          children: \"Qu\\u1EA3n l\\xFD kh\\xF3a h\\u1ECDc\"\n        }, \"/admin/courses\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-11/12\",\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        form: form,\n        component: false,\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          components: {\n            body: {\n              cell: EditableCell\n            }\n          },\n          bordered: true,\n          dataSource: (_userList$data = userList.data) === null || _userList$data === void 0 ? void 0 : _userList$data.items,\n          columns: mergedColumns,\n          rowClassName: \"editable-row\",\n          pagination: {\n            onChange: cancel\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 194,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AdminPage, \"gFEQBqh860l1TjZlLBlI4M65xH8=\", false, function () {\n  return [useHistory, Form.useForm, useQuery];\n});\n\n_c2 = AdminPage;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"EditableCell\");\n$RefreshReg$(_c2, \"AdminPage\");","map":{"version":3,"sources":["/Users/hieu/Documents/HCMUS_FIT/WEB_NC/webapp/src/modules/admin/AdminPage.tsx"],"names":["React","useState","useCallback","MenuUnfoldOutlined","MenuFoldOutlined","TeamOutlined","ReadFilled","UserOutlined","useHistory","useQuery","Menu","Button","Table","Popconfirm","Typography","Form","Input","InputNumber","UserService","UserRole","Column","ColumnGroup","EditableCell","editing","dataIndex","title","inputType","record","index","children","restProps","inputNode","margin","required","message","AdminPage","props","history","collapsed","setCollapsed","req","setReq","page","pageSize","role","TEACHER","form","useForm","editingId","setEditingId","isEditing","id","userList","search","edit","setFieldsValue","username","firstName","lastName","email","cancel","save","columns","editable","render","_","console","log","marginRight","mergedColumns","map","col","onCell","marginBottom","createElement","location","pathname","e","push","key","body","cell","data","items","onChange"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\nimport {\n  MenuUnfoldOutlined,\n  MenuFoldOutlined,\n  TeamOutlined,\n  ReadFilled,\n  UserOutlined\n} from '@ant-design/icons';\nimport { RouteComponentProps, useHistory } from 'react-router';\nimport { useQuery } from \"../../shared/hooks/useQuery.hook\";\nimport { Menu, Button, Table, Tag, Space, Popconfirm, Typography, Form, Input, InputNumber } from 'antd';\n\nimport { UserService } from '../user/UserService'\nimport { IContentSearchRequest } from '../user/types/SearchUserRequest';\nimport { UserRole } from '../../shared/enums/UserRole';\nconst { Column, ColumnGroup } = Table;\n\ninterface Item {\n  username: string; \n  firstName: string;\n  lastName: string; \n  email: string;\n  status: string;\n}\n\nconst EditableCell = ({\n  editing,\n  dataIndex,\n  title,\n  inputType,\n  record,\n  index,\n  children,\n  ...restProps\n}: any) => {\n  const inputNode = inputType === 'number' ? <InputNumber /> : <Input />;\n\n  return (\n    <td {...restProps}>\n      {editing ? (\n        <Form.Item\n          name={dataIndex}\n          style={{ margin: 0 }}\n          rules={[\n            {\n              required: true,\n              message: `Please Input ${title}!`,\n            },\n          ]}\n        >\n          {inputNode}\n        </Form.Item>\n      ) : (\n        children\n      )}\n    </td>\n  );\n};\n \nexport function AdminPage(props: RouteComponentProps) {\n  const history = useHistory();\n  const [collapsed, setCollapsed] = useState(false);\n  const [req, setReq] = useState({\n    page: 1,\n    pageSize: 10,\n    role: UserRole.TEACHER\n  })\n  const [form] = Form.useForm();\n  const [editingId, setEditingId] = useState('');\n  const isEditing = (record: any) => record.id === editingId;\n\n  const userList = useQuery(\n    useCallback(()=> UserService.search(req), [req])\n  );\n\n  const edit = (record: any) => {\n    form.setFieldsValue({ username: '', firstName: '', lastName: '', email: '', ...record });\n    setEditingId(record.id);\n  };\n\n  const cancel = () => {\n    setEditingId('');\n  };\n\n\n  const save = async (id: any) => {\n    // try {\n    //   const row = (await form.validateFields()) as any;\n    //   const newData = [...userList.data?.items];\n     \n    //   const index = newData.findIndex(item => id === item.id);\n    //   if (index > -1) {\n    //     const item = newData[index];\n    //     newData.splice(index, 1, {\n    //       ...item,\n    //       ...row,\n    //     });\n    //     setData(newData);\n    //     setEditingKey('');\n    //   } else {\n    //     newData.push(row);\n    //     setData(newData);\n    //     setEditingKey('');\n    //   }\n    // } catch (errInfo) {\n    //   console.log('Validate Failed:', errInfo);\n    // }\n\n    //const row = (await form.validateFields()) as any;\n    // const newData = [...userList.data?.item];\n    //console.log('showr: ', row)\n  };\n\n  \n\n  const columns = [\n    {\n      title: \"ID\", \n      dataIndex: \"id\",\n      editable: false,\n    },\n    {\n      title: \"USER NAME\",\n      dataIndex: \"username\",\n      editable: true,\n    },\n    {\n      title: \"FIRST NAME\",\n      dataIndex: \"firstName\",\n      editable: true,\n    },\n    {\n      title: \"LAST NAME\",\n      dataIndex: \"lastName\",\n      editable: true,\n    },\n    {\n      title: \"EMAIL\",\n      dataIndex: \"email\",\n      editable: true,\n    },\n    {\n      title: \"STATUS\",\n      dataIndex: \"status\",\n      editable: true,\n    },\n    {\n      title: \"CREATED DATE\",\n      dataIndex: \"createdDate\",\n      editable: false,\n    },\n    {\n      title: 'Action',\n      dataIndex: 'id',\n      render: (_: any, record: any) => {\n        const editable = isEditing(record);\n        console.log('innn: ', editable);\n        return editable ? (\n          <span>\n            <a onClick={() => save(record.id)} style={{ marginRight: 8 }}>\n              Save\n            </a>\n            <Popconfirm title=\"Sure to cancel?\" onConfirm={cancel}>\n              <a>Cancel</a>\n            </Popconfirm>\n          </span>\n        ) : (\n          <Typography.Link disabled={editingId !== ''} onClick={() => edit(record)}>\n            Edit\n          </Typography.Link>\n        );\n      },\n    },\n  ]\n\n\n  const mergedColumns = columns.map(col => {\n    if (!col.editable) {\n      return col;\n    }\n    return {\n      ...col,\n      onCell: (record: any) => ({\n        record,\n        inputType: col.dataIndex === 'status' ? 'number' : 'text',\n        dataIndex: col.dataIndex,\n        title: col.title,\n        editing: isEditing(record),\n      }),\n    };\n  });\n\n  return (\n    <div className=\"flex space-x-4\">\n      <div className=\"\">\n        <Button type=\"primary\" onClick={()=>setCollapsed(!collapsed)} style={{ marginBottom: 16 }}>\n            {React.createElement(collapsed ? MenuUnfoldOutlined : MenuFoldOutlined)}\n          </Button>\n          <Menu\n            defaultSelectedKeys={[props.location.pathname]}\n            defaultOpenKeys={['admin/students']}\n            mode=\"inline\"\n            theme=\"dark\"\n            onSelect={e => history.push(e.key as any)}\n            inlineCollapsed={collapsed}\n          >\n            <Menu.Item key=\"/admin/students\" icon={<TeamOutlined />}>\n              Quản lý học viên\n            </Menu.Item>\n            <Menu.Item key=\"/admin/teachers\" icon={<UserOutlined />}>\n              Quản lý giảng viên\n            </Menu.Item>\n            <Menu.Item key=\"/admin/courses\" icon={<ReadFilled />}>\n              Quản lý khóa học\n            </Menu.Item>\n          </Menu>\n        </div>\n      <div className=\"w-11/12\">\n      <Form form={form} component={false}>\n        <Table\n          components={{\n            body: {\n              cell: EditableCell,\n            },\n          }}\n          bordered\n          dataSource={userList.data?.items}\n          columns={mergedColumns}\n          rowClassName=\"editable-row\"\n          pagination={{\n            onChange: cancel,\n          }}\n        />\n      </Form>\n\n\n        {/* <Table loading={userList.loading || !!userList.error} dataSource={userList.data?.items}>\n          \n          <Column title=\"ID\" dataIndex=\"id\" key=\"id\" />\n          <Column title=\"USER NAME\" dataIndex=\"username\" key=\"username\" />\n          <Column title=\"FIRST NAME\" dataIndex=\"firstName\" key=\"firstName\" />\n          <Column title=\"LAST NAME\" dataIndex=\"lastName\" key=\"lastName\" />\n          <Column title=\"EMAIL\" dataIndex=\"email\" key=\"email\" />\n          <Column title=\"ROLE\" dataIndex=\"role\" key=\"role\" />\n          <Column title=\"STATUS\" dataIndex=\"status\" key=\"status\" />\n          <Column title=\"CREATED DATE\" dataIndex=\"createdDate\" key=\"createdDate\" />\n\n          <Column\n            title=\"Tags\"\n            dataIndex=\"tags\"\n            key=\"tag\"\n            render= {(_: any, record: any) => {\n              console.log(\"dadda: \", _, record)\n                const editable = isEditing(record);\n                return editable ? (\n                  <span>\n                    <a onClick={() => save(record.key)} style={{ marginRight: 8 }}>\n                      Save\n                    </a>\n                    <Popconfirm title=\"Sure to cancel?\" onConfirm={cancel}>\n                      <a>Cancel</a>\n                    </Popconfirm>\n                  </span>\n                ) : (\n                  <Typography.Link disabled={editingId !== ''} onClick={() => edit(record)}>\n                    Edit\n                  </Typography.Link>\n                );\n              }\n            }\n          />\n            \n          \n        </Table> */}\n      </div>\n\n      \n      </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}