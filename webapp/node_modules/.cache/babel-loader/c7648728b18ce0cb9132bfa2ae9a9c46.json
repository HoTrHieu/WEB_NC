{"ast":null,"code":"var _jsxFileName = \"/Users/hieu/Documents/HCMUS_FIT/WEB_NC/webapp/src/modules/course/CourseList.tsx\",\n    _s = $RefreshSig$();\n\nimport { Divider, Input, Pagination } from \"antd\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { FdmLoading } from \"../../shared/components/FdmLoading\";\nimport { FdmOrderDirectionSelect } from \"../../shared/components/FdmOrderDirectionSelect\";\nimport { FdmPriceSlider } from \"../../shared/components/FdmPriceSlider\";\nimport { FdmStarSlider } from \"../../shared/components/FdmStarSlider\";\nimport { OrderDirection } from \"../../shared/enums/OrderDirection\";\nimport { useCompKey } from \"../../shared/hooks/useCompKey\";\nimport { useQuery } from \"../../shared/hooks/useQuery.hook\";\nimport { CategorySelect } from \"../category/CategorySelect\";\nimport { CourseCard } from \"./CourseCard\";\nimport { CourseOrderBySelect } from \"./CourseSortTypeSelect\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function CourseList(props) {\n  _s();\n\n  const [page, setPage] = useState(1);\n  const [pageSize, setPageSize] = useState(20);\n  const [searchTerm, setSearchTerm] = useState(props.searchTerm || \"\");\n  const [orderBy, setOrderBy] = useState(null);\n  const [orderDirection, setOrderDirection] = useState(null);\n  const [filters, setFilters] = useState({\n    categoryIds: (() => {\n      return props.categoryId && !isNaN(props.categoryId) && props.categoryId > 0 ? [props.categoryId] : [];\n    })()\n  });\n  const searchTermCompKey = useCompKey();\n  const renewSearchTermCompKey = searchTermCompKey.renewCompKey;\n  const updateFilters = useCallback(newFilters => {\n    setFilters({ ...filters,\n      ...newFilters\n    });\n    setPage(1);\n  }, [filters]);\n  useEffect(() => {\n    setSearchTerm(props.searchTerm || \"\");\n    renewSearchTermCompKey();\n  }, [props.searchTerm, renewSearchTermCompKey]);\n  const propsFetchSource = props.fetchSource;\n  const fetchSource = useCallback(() => {\n    return propsFetchSource({\n      page,\n      pageSize,\n      searchTerm: searchTerm || undefined,\n      orderBy: orderBy,\n      orderDirection: orderDirection,\n      ...filters\n    });\n  }, [propsFetchSource, page, pageSize, searchTerm, orderBy, orderDirection, filters]);\n  const coursesResponse = useQuery(fetchSource);\n  const pagingResponse = coursesResponse.data;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-4 flex\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-5/6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Showing page \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: page\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 26\n          }, this), \" with page size \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: pageSize\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 55\n          }, this), \" of total\", \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: (pagingResponse === null || pagingResponse === void 0 ? void 0 : pagingResponse.total) || 0\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this), \" courses\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ml-auto flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mr-2\",\n              children: \"Order by:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CourseOrderBySelect, {\n              value: orderBy,\n              onChange: val => {\n                setOrderBy(val);\n\n                if (!orderDirection) {\n                  setOrderDirection(OrderDirection.DESC);\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center ml-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mr-2\",\n              children: \"Order direction:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FdmOrderDirectionSelect, {\n              disabled: !orderBy,\n              value: orderDirection,\n              onChange: setOrderDirection\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input.Search, {\n        allowClear: true,\n        className: \"w-full mb-4\",\n        placeholder: \"Search courses...\",\n        defaultValue: searchTerm,\n        onSearch: setSearchTerm\n      }, searchTermCompKey.compKey, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), !pagingResponse ? /*#__PURE__*/_jsxDEV(FdmLoading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap\",\n        children: pagingResponse.items.map((course, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-1/4 px-2 mb-4\",\n          children: /*#__PURE__*/_jsxDEV(CourseCard, {\n            course: course\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 flex justify-center\",\n        children: /*#__PURE__*/_jsxDEV(Pagination, {\n          current: page,\n          pageSize: pageSize,\n          total: (pagingResponse === null || pagingResponse === void 0 ? void 0 : pagingResponse.total) || 0,\n          showSizeChanger: true,\n          pageSizeOptions: [\"20\", \"50\"],\n          onChange: (page, pageSize) => {\n            setPage(page);\n            setPageSize(pageSize || 20);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-1/6 ml-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rounded-lg shadow p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CategorySelect, {\n          defaultValue: filters.categoryIds,\n          mode: \"multiple\",\n          onChange: categoryIds => updateFilters({\n            categoryIds\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block my-4\",\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FdmPriceSlider, {\n          range: true,\n          defaultValue: [0, 500],\n          onAfterChange: ([fromPrice, toPrice]) => {\n            updateFilters({\n              fromPrice,\n              toPrice\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block my-4\",\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Star\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FdmStarSlider, {\n          range: true,\n          defaultValue: [0, 5],\n          onAfterChange: ([fromStar, toStar]) => {\n            updateFilters({\n              fromStar,\n              toStar\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CourseList, \"efYTDCk4OC5sjHtiTbBfrpIA5kM=\", false, function () {\n  return [useCompKey, useQuery];\n});\n\n_c = CourseList;\n\nvar _c;\n\n$RefreshReg$(_c, \"CourseList\");","map":{"version":3,"sources":["/Users/hieu/Documents/HCMUS_FIT/WEB_NC/webapp/src/modules/course/CourseList.tsx"],"names":["Divider","Input","Pagination","React","useCallback","useEffect","useState","FdmLoading","FdmOrderDirectionSelect","FdmPriceSlider","FdmStarSlider","OrderDirection","useCompKey","useQuery","CategorySelect","CourseCard","CourseOrderBySelect","CourseList","props","page","setPage","pageSize","setPageSize","searchTerm","setSearchTerm","orderBy","setOrderBy","orderDirection","setOrderDirection","filters","setFilters","categoryIds","categoryId","isNaN","searchTermCompKey","renewSearchTermCompKey","renewCompKey","updateFilters","newFilters","propsFetchSource","fetchSource","undefined","coursesResponse","pagingResponse","data","total","val","DESC","compKey","items","map","course","idx","fromPrice","toPrice","fromStar","toStar"],"mappings":"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","sourcesContent":["import { Divider, Input, Pagination } from \"antd\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { FdmLoading } from \"../../shared/components/FdmLoading\";\nimport { FdmOrderDirectionSelect } from \"../../shared/components/FdmOrderDirectionSelect\";\nimport { FdmPriceSlider } from \"../../shared/components/FdmPriceSlider\";\nimport { FdmStarSlider } from \"../../shared/components/FdmStarSlider\";\nimport { ICourse } from \"../../shared/entities/ICourse\";\nimport { OrderDirection } from \"../../shared/enums/OrderDirection\";\nimport { useCompKey } from \"../../shared/hooks/useCompKey\";\nimport { useQuery } from \"../../shared/hooks/useQuery.hook\";\nimport { IPagingResponse } from \"../../types/IPagingResponse\";\nimport { CategorySelect } from \"../category/CategorySelect\";\nimport { CourseCard } from \"./CourseCard\";\nimport { CourseOrderBySelect } from \"./CourseSortTypeSelect\";\nimport { CourseOrderBy } from \"./enums/CourseOrderBy\";\nimport { ICourseSearchRequest } from \"./types/CourseSearchRequest\";\n\ninterface ICourseListProps {\n  categoryId?: number;\n  searchTerm?: string;\n  fetchSource: (\n    request: ICourseSearchRequest\n  ) => Promise<IPagingResponse<ICourse>>;\n}\n\nexport function CourseList(props: ICourseListProps) {\n  const [page, setPage] = useState(1);\n  const [pageSize, setPageSize] = useState(20);\n  const [searchTerm, setSearchTerm] = useState(props.searchTerm || \"\");\n  const [orderBy, setOrderBy] = useState<CourseOrderBy | null>(null);\n  const [orderDirection, setOrderDirection] = useState<OrderDirection | null>(\n    null\n  );\n  const [filters, setFilters] = useState<any>({\n    categoryIds: (() => {\n      return props.categoryId &&\n        !isNaN(props.categoryId) &&\n        props.categoryId > 0\n        ? [props.categoryId]\n        : [];\n    })(),\n  });\n  const searchTermCompKey = useCompKey();\n  const renewSearchTermCompKey = searchTermCompKey.renewCompKey;\n\n  const updateFilters = useCallback(\n    (newFilters: any) => {\n      setFilters({ ...filters, ...newFilters });\n      setPage(1);\n    },\n    [filters]\n  );\n\n  useEffect(() => {\n    setSearchTerm(props.searchTerm || \"\");\n    renewSearchTermCompKey();\n  }, [props.searchTerm, renewSearchTermCompKey]);\n\n  const propsFetchSource = props.fetchSource;\n  const fetchSource = useCallback(() => {\n    return propsFetchSource({\n      page,\n      pageSize,\n      searchTerm: searchTerm || undefined,\n      orderBy: orderBy as any,\n      orderDirection: orderDirection as any,\n      ...filters,\n    });\n  }, [\n    propsFetchSource,\n    page,\n    pageSize,\n    searchTerm,\n    orderBy,\n    orderDirection,\n    filters,\n  ]);\n\n  const coursesResponse = useQuery(fetchSource);\n  const pagingResponse: IPagingResponse<ICourse> = coursesResponse.data;\n  return (\n    <div className=\"mb-4 flex\">\n      <div className=\"w-5/6\">\n        <div className=\"flex items-center mb-4\">\n          <div>\n            Showing page <b>{page}</b> with page size <b>{pageSize}</b> of total{\" \"}\n            <b>{pagingResponse?.total || 0}</b> courses\n          </div>\n          <div className=\"ml-auto flex\">\n            <div className=\"flex items-center\">\n              <span className=\"mr-2\">Order by:</span>\n              <CourseOrderBySelect\n                value={orderBy as any}\n                onChange={(val) => {\n                  setOrderBy(val);\n                  if (!orderDirection) {\n                    setOrderDirection(OrderDirection.DESC);\n                  }\n                }}\n              />\n            </div>\n            <div className=\"flex items-center ml-4\">\n              <span className=\"mr-2\">Order direction:</span>\n              <FdmOrderDirectionSelect\n                disabled={!orderBy}\n                value={orderDirection as any}\n                onChange={setOrderDirection}\n              />\n            </div>\n          </div>\n        </div>\n        <Input.Search\n          key={searchTermCompKey.compKey}\n          allowClear\n          className=\"w-full mb-4\"\n          placeholder=\"Search courses...\"\n          defaultValue={searchTerm}\n          onSearch={setSearchTerm as any}\n        />\n        {!pagingResponse ? (\n          <FdmLoading />\n        ) : (\n          <div className=\"flex flex-wrap\">\n            {pagingResponse.items.map((course: ICourse, idx: number) => (\n              <div className=\"w-1/4 px-2 mb-4\">\n                <CourseCard course={course} key={idx} />\n              </div>\n            ))}\n          </div>\n        )}\n        <div className=\"mt-4 flex justify-center\">\n          <Pagination\n            current={page}\n            pageSize={pageSize}\n            total={pagingResponse?.total || 0}\n            showSizeChanger\n            pageSizeOptions={[\"20\", \"50\"]}\n            onChange={(page, pageSize) => {\n              setPage(page);\n              setPageSize(pageSize || 20);\n            }}\n          />\n        </div>\n      </div>\n      <div className=\"w-1/6 ml-5\">\n        <div className=\"rounded-lg shadow p-3\">\n          <label className=\"block mb-4\">\n            <b>Category</b>\n          </label>\n          <CategorySelect\n            defaultValue={filters.categoryIds}\n            mode=\"multiple\"\n            onChange={(categoryIds) => updateFilters({ categoryIds })}\n          />\n          <Divider />\n          <label className=\"block my-4\">\n            <b>Price</b>\n          </label>\n          <FdmPriceSlider\n            range\n            defaultValue={[0, 500]}\n            onAfterChange={([fromPrice, toPrice]) => {\n              updateFilters({ fromPrice, toPrice });\n            }}\n          />\n          <Divider />\n          <label className=\"block my-4\">\n            <b>Star</b>\n          </label>\n          <FdmStarSlider\n            range\n            defaultValue={[0, 5]}\n            onAfterChange={([fromStar, toStar]) => {\n              updateFilters({ fromStar, toStar });\n            }}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}