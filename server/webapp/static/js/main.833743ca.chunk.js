(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{227:function(e,t,a){},652:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),s=a(46),n=a.n(s),i=(a(227),a(21)),l=a(13),o=a(668),u=a(669),d=a(670),j=a(671),b=a(672),m=a(7),h=a.n(m),x=a(18);function O(e){var t=Object(r.useState)(!0),a=Object(l.a)(t,2),c=a[0],s=a[1],n=Object(r.useState)(null),i=Object(l.a)(n,2),o=i[0],u=i[1],d=Object(r.useState)(null),j=Object(l.a)(d,2),b=j[0],m=j[1],O=Object(r.useCallback)(Object(x.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m(null),u(null),s(!0),!e){t.next=17;break}return t.prev=4,t.t0=m,t.next=8,e();case 8:t.t1=t.sent,(0,t.t0)(t.t1),t.next=16;break;case 12:t.prev=12,t.t2=t.catch(4),console.error(t.t2),u(t.t2);case 16:s(!1);case 17:case"end":return t.stop()}}),t,null,[[4,12]])}))),[e]);return Object(r.useEffect)((function(){O()}),[O]),Object(r.useMemo)((function(){return{loading:c,error:o,data:b,reFetch:O}}),[c,o,b,O])}var p=a(655),f=a(75),v=a(120),g=a(38),N=a(39),y={auth:{register:"/api/v1/auth/register",login:"/api/v1/auth/login",loginGoogle:"/api/v1/auth/login/google",refreshAccessToken:"/api/v1/auth/refresh-access-token",getProfile:"/api/v1/auth/profile",changePassword:"/api/v1/auth/change-password"},user:{search:"/api/v1/user/search",add:"/api/v1/user/add",checkEmail:"/api/v1/user/check-email",checkUsername:"/api/v1/user/check-username",updateEmail:"/api/v1/user/update-email",updateFirstLastName:"/api/v1/user/update-first-last-name",updateTeacherProfile:"/api/v1/user/update-teacher-profile",updateRole:function(e){return"/api/v1/user/update-role/".concat(e)},updateStatus:function(e){return"/api/v1/user/update-status/".concat(e)}},category:{all:"/api/v1/category/all",topOfWeeks:"/api/v1/category/top-of-weeks",add:"/api/v1/category/add",udpateStatus:function(e){return"/api/v1/cateogry/update-status"}},course:{search:"/api/v1/course/search",topOfWeeks:"/api/v1/course/top-of-weeks",add:"/api/v1/course",top:function(e){return"/api/v1/course/top/".concat(e)},getDetail:function(e){return"/api/v1/course/detail/".concat(e)},update:function(e){return"/api/v1/course/".concat(e)},updateStatus:function(e){return"/api/v1/course/update-status/".concat(e)},increaseTotalView:function(e){return"/api/v1/course/increase-total-view/".concat(e)}},content:{add:"/api/v1/content/add",update:function(e){return"/api/v1/content/update/".concat(e)},updateStatus:function(e){return"/api/v1/content/update-status/".concat(e)}},uploader:{upload:"/api/v1/uploader/upload"},enrollment:{getDetail:function(e){return"/api/v1/enrollment/".concat(e)},enroll:function(e){return"/api/v1/enrollment/enroll/".concat(e)}},review:{paginate:function(e){return"/api/v1/review/paginate/".concat(e)},add:function(e){return"/api/v1/review/".concat(e)}},studyProcess:{findOne:function(e){return"/api/v1/study-process/find-one/".concat(e)},findByCourseId:function(e){return"/api/v1/study-process/find-by-course-id/".concat(e)},update:function(e){return"/api/v1/study-process/".concat(e)}},watchList:{updateStatus:function(e){return"/api/v1/watch-list/update-status/".concat(e)}},mailSender:{sendOtpMail:"/api/v1/mail-sender/send-otp-mail"}},k=[y.auth.getProfile,y.auth.refreshAccessToken,y.auth.changePassword,y.user.updateEmail,y.user.updateFirstLastName,y.user.search,y.user.updateRole,y.user.updateStatus,y.category.add,y.category.udpateStatus,y.course.add,y.course.update,y.course.updateStatus,y.course.increaseTotalView,y.content.update,y.content.updateStatus,y.uploader.upload,y.enrollment.getDetail,y.enrollment.enroll,y.review.add,y.studyProcess.findOne,y.studyProcess.findByCourseId,y.studyProcess.update,y.watchList.updateStatus],w=a(64),A=a.n(w),E=function(){function e(){Object(g.a)(this,e)}return Object(N.a)(e,null,[{key:"get",value:function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get(t,a);case 2:return r=e.sent,c=r.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(x.a)(h.a.mark((function e(t,a,r){var c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post(t,a);case 2:return c=e.sent,s=c.data,e.abrupt("return",r?r(s):s.result);case 5:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(x.a)(h.a.mark((function e(t,a,r){var c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r?A.a[r](t,a):A.a.put(t,a);case 2:return c=e.sent,s=c.data,e.abrupt("return",s.success);case 5:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.put(t,null,"delete"));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(x.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.put(t,a,"post"));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),S=function(){function e(){Object(g.a)(this,e)}return Object(N.a)(e,null,[{key:"add",value:function(e){return E.create(y.user.add,e)}},{key:"checkEmail",value:function(){var e=Object(x.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get(y.user.checkEmail,{params:{email:t}});case 2:return a=e.sent,e.abrupt("return",a.exists);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkUsername",value:function(){var e=Object(x.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get(y.user.checkUsername,{params:{username:t}});case 2:return a=e.sent,e.abrupt("return",a.exists);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"search",value:function(e){return E.get(y.user.search,{params:e})}},{key:"updateEmail",value:function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.put(y.user.updateEmail,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateFirstLastName",value:function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.put(y.user.updateFirstLastName,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateTeacherProfile",value:function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.put(y.user.updateTeacherProfile,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),C=a(1),I=p.a.Column;p.a.ColumnGroup;function T(e){var t=Object(i.g)(),a=Object(r.useState)(!1),s=Object(l.a)(a,2),n=s[0],m=s[1],h={page:1,pageSize:10},x=O(Object(r.useCallback)((function(){return S.search(h)}),[]));console.log("showlll: ",x);return Object(C.jsxs)("div",{className:"flex space-x-4",children:[Object(C.jsxs)("div",{className:"",children:[Object(C.jsx)(f.a,{type:"primary",onClick:function(){return m(!n)},style:{marginBottom:16},children:c.a.createElement(n?o.a:u.a)}),Object(C.jsxs)(v.a,{defaultSelectedKeys:[e.location.pathname],defaultOpenKeys:["admin/students"],mode:"inline",theme:"dark",onSelect:function(e){return t.push(e.key)},inlineCollapsed:n,children:[Object(C.jsx)(v.a.Item,{icon:Object(C.jsx)(d.a,{}),children:"Qu\u1ea3n l\xfd h\u1ecdc vi\xean"},"/admin/students"),Object(C.jsx)(v.a.Item,{icon:Object(C.jsx)(j.a,{}),children:"Qu\u1ea3n l\xfd gi\u1ea3ng vi\xean"},"/admin/teachers"),Object(C.jsx)(v.a.Item,{icon:Object(C.jsx)(b.a,{}),children:"Qu\u1ea3n l\xfd kh\xf3a h\u1ecdc"},"/admin/courses")]})]}),Object(C.jsx)("div",{className:"w-11/12",children:Object(C.jsxs)(p.a,{dataSource:[{id:1,username:"admin",email:"admin@gmail.com",firstName:"Super",lastName:"Admin",role:1,status:1,createdDate:"2021-03-17T07:50:02.949Z"},{id:2,username:"teacher1",email:"teacher1@gmail.com",firstName:"I am",lastName:"Teacher 1",role:2,status:1,createdDate:"2021-03-17T07:50:02.977Z"},{id:3,username:"student1",email:"student1@gmail.com",firstName:"I am",lastName:"Student 1",role:3,status:1,createdDate:"2021-03-17T07:50:02.992Z"},{id:4,username:"Macey1",email:"Macey1@gmail.com",firstName:"Macey",lastName:"Von",role:2,status:1,createdDate:"2021-03-17T07:50:03.006Z"},{id:5,username:"Brannon2",email:"Brannon2@gmail.com",firstName:"Brannon",lastName:"Dickinson",role:2,status:1,createdDate:"2021-03-17T07:50:03.017Z"},{id:6,username:"Sage3",email:"Sage3@gmail.com",firstName:"Sage",lastName:"Donnelly",role:2,status:1,createdDate:"2021-03-17T07:50:03.029Z"},{id:7,username:"Lelia4",email:"Lelia4@gmail.com",firstName:"Lelia",lastName:"Kuphal",role:2,status:1,createdDate:"2021-03-17T07:50:03.043Z"},{id:8,username:"Jeanne5",email:"Jeanne5@gmail.com",firstName:"Jeanne",lastName:"Connelly",role:2,status:1,createdDate:"2021-03-17T07:50:03.057Z"},{id:9,username:"Brennan6",email:"Brennan6@gmail.com",firstName:"Brennan",lastName:"Anderson",role:2,status:1,createdDate:"2021-03-17T07:50:03.073Z"},{id:10,username:"Jaiden7",email:"Jaiden7@gmail.com",firstName:"Jaiden",lastName:"Stehr",role:2,status:1,createdDate:"2021-03-17T07:50:03.092Z"}],children:[Object(C.jsx)(I,{title:"ID",dataIndex:"id"},"id"),Object(C.jsx)(I,{title:"USER NAME",dataIndex:"username"},"username"),Object(C.jsx)(I,{title:"FIRST NAME",dataIndex:"firstName"},"firstName"),Object(C.jsx)(I,{title:"LAST NAME",dataIndex:"lastName"},"lastName"),Object(C.jsx)(I,{title:"EMAIL",dataIndex:"email"},"email"),Object(C.jsx)(I,{title:"ROLE",dataIndex:"role"},"role"),Object(C.jsx)(I,{title:"STATUS",dataIndex:"status"},"status"),Object(C.jsx)(I,{title:"CREATED DATE",dataIndex:"createdDate"},"createdDate")]})})]})}var Q,B=a(657);!function(e){e[e.ADMIN=1]="ADMIN",e[e.TEACHER=2]="TEACHER",e[e.NORMAL=3]="NORMAL"}(Q||(Q={}));var P=a(330),R=a.n(P),F=function(){function e(){Object(g.a)(this,e)}return Object(N.a)(e,null,[{key:"isAuthed",get:function(){var e=R.a.parse(window.location.search.replace("?",""));return e.accessToken&&e.refreshToken&&(this.saveTokens(e),window.location.search=""),!!this.accessToken}},{key:"accessToken",get:function(){return sessionStorage.getItem(this.ACCESS_TOKEN_KEY)}},{key:"refreshToken",get:function(){return localStorage.getItem(this.REFRESH_TOKEN_KEY)}},{key:"saveTokens",value:function(e){return sessionStorage.setItem(this.ACCESS_TOKEN_KEY,e.accessToken),localStorage.setItem(this.REFRESH_TOKEN_KEY,e.refreshToken),e}},{key:"login",value:function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.post(y.auth.login,{username:t,password:a});case 3:return r=e.sent,c=r.data,e.abrupt("return",this.saveTokens(c));case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"clearTokens",value:function(){sessionStorage.removeItem(this.ACCESS_TOKEN_KEY),localStorage.removeItem(this.REFRESH_TOKEN_KEY)}},{key:"logout",value:function(){this.clearTokens(),window.location.pathname="/"}},{key:"refreshAccessToken",value:function(){var e=Object(x.a)(h.a.mark((function e(){var t,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.refreshToken){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,A.a.post(y.auth.refreshAccessToken,null,{params:{refreshToken:this.refreshToken}});case 5:return t=e.sent,a=t.data,e.abrupt("return",this.saveTokens(a));case 10:return e.prev=10,e.t0=e.catch(2),404===(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r?void 0:r.status)?this.logout():console.error(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isAuthed){e.next=6;break}if(this.user){e.next=5;break}return e.next=4,this.getProfile();case 4:this.user=e.sent;case 5:return e.abrupt("return",this.user);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProfile",value:function(){var e=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.get(y.auth.getProfile);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"changePassword",value:function(e,t){return E.put(y.auth.changePassword,{oldPassword:e,newPassword:t})}},{key:"isAdmin",get:function(){return this.user.role===Q.ADMIN}},{key:"register",value:function(e){return E.create(y.auth.register,e)}}]),e}();F.user=void 0,F.ACCESS_TOKEN_KEY="FDM_ACCESS_TOKEN",F.REFRESH_TOKEN_KEY="FDM_REFRESH_TOKEN";var D=a(673),M=a(343),U=a(658),L=a(661),K=a(131),J={email:[{required:!0,message:"E-mail is required"},{type:"email",message:"E-mail is invalid"}],username:[{required:!0,message:"Username is required"},{min:4,message:"Username is too short"},{max:255,message:"Username is too long"}],password:[{required:!0,message:"Password is required"},{min:8,message:"Password is too short"},{max:255,message:"Password is too long"}],confirmPassword:[{required:!0,message:"Confirm password is required"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&t("password")!==a){e.next=2;break}return e.abrupt("return",!0);case 2:throw new Error("Confirm password is not match");case 3:case"end":return e.stop()}}),e)})))()}}}],firstName:[{required:!0,message:"First name is required"},{min:2,message:"First name is too short"},{max:255,message:"First name is too long"}],lastName:[{required:!0,message:"Last name is required"},{min:2,message:"Last name is too short"},{max:255,message:"Last name is too long"}],bio:[{min:2,message:"Bio is too short"},{max:255,message:"Bio is too long"}],introduction:[{min:2,message:"Introduction is too short"}]},H="/assets";function q(e){var t=Object(K.useForm)(),a=Object(l.a)(t,1)[0],c=Object(r.useCallback)(function(){var t=Object(x.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.login(a.username,a.password);case 2:t.sent?window.location.pathname=e.redirect||"/":M.a.error({message:"Error",description:"Username or password are wrong"});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e.redirect]);return Object(C.jsxs)(U.a,{form:a,onFinish:c,children:[Object(C.jsxs)("label",{className:"block mb-2",children:["Username ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"username",rules:J.username,children:Object(C.jsx)(L.a,{placeholder:"Username..."})}),Object(C.jsxs)("label",{className:"block mb-2",children:["Password ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"password",rules:J.password,children:Object(C.jsx)(L.a,{placeholder:"Password...",type:"password"})}),Object(C.jsxs)(U.a.Item,{children:[Object(C.jsx)(f.a,{type:"primary",shape:"round",className:"w-full mb-4",htmlType:"submit",children:"Login"}),Object(C.jsxs)(f.a,{type:"primary",shape:"round",className:"w-full",danger:!0,onClick:function(){return window.location.replace(""+y.auth.loginGoogle)},children:[Object(C.jsx)(D.a,{className:"text-xl",style:{transform:"translateY(-2px)"}})," ","Sign-in with Google"]})]})]})}var z=function(){function e(){Object(g.a)(this,e)}return Object(N.a)(e,null,[{key:"error",value:function(e){M.a.error({message:"C\xf3 l\u1ed7i x\u1ea3y ra",description:Object(C.jsxs)(C.Fragment,{children:["Th\xf4ng tin l\u1ed7i: ",Object(C.jsx)("b",{children:e})]}),style:{zIndex:10}})}}]),e}(),Y=a(11),V=function(){function e(){Object(g.a)(this,e)}return Object(N.a)(e,null,[{key:"sendOtp",value:function(e,t){return E.post(y.mailSender.sendOtpMail,{name:e,email:t})}}]),e}(),G=[0,30,300,600,1800];function W(){var e=Object(r.useState)(0),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(0),n=Object(l.a)(s,2),i=n[0],o=n[1],u=Object(r.useRef)(),d=Object(r.useCallback)(function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.sendOtp(t.firstName,t.email);case 3:c(a+1),M.a.success({message:"Success",description:Object(C.jsxs)(C.Fragment,{children:["An e-mail with OTP is sent for ",Object(C.jsx)("b",{children:t.email}),", please check it"]})}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),z.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[a]),j=Object(r.useCallback)((function(){u.current&&clearInterval(u.current)}),[]);Object(r.useEffect)((function(){j();var e=G[Math.min(a,G.length-1)];return o(e),u.current=setInterval((function(){0===--e&&j(),o(e)}),1e3),j}),[a,j]);var b=Object(r.memo)((function(e){return Object(C.jsx)(f.a,Object(Y.a)(Object(Y.a)({type:"primary",shape:"round",loading:i>0},e),{},{children:i>0?"Please wait for ".concat(i," (s)..."):"Re-send OTP"}))}));return Object(r.useMemo)((function(){return{sendOtp:d,removeInterval:j,SendOtpButton:b}}),[b,j,d])}var Z,_=a(77),X=Object(Y.a)(Object(Y.a)({},J),{},{email:[].concat(Object(_.a)(J.email),[{validator:function(e,t){return Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.checkEmail(t);case 2:if(!e.sent){e.next=5;break}throw new Error("E-mail is existed, please use another");case 5:case"end":return e.stop()}}),e)})))()},validateTrigger:"submit"}]),username:[].concat(Object(_.a)(J.username),[{validator:function(e,t){return Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.checkUsername(t);case 2:if(!e.sent){e.next=5;break}throw new Error("Username is existed, please use another");case 5:case"end":return e.stop()}}),e)})))()},validateTrigger:"submit"}]),otp:[{required:!0,message:"OTP is required"}]});function $(){var e=Object(K.useForm)(),t=Object(l.a)(e,1)[0],a=Object(r.useState)(null),c=Object(l.a)(a,2),s=c[0],n=c[1],o=Object(r.useState)(!1),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)(!1),m=Object(l.a)(b,2),O=m[0],p=m[1],v=Object(i.g)(),g=W(),N=g.sendOtp,y=Object(r.useCallback)(function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,N(t);case 3:j(!1),n(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[N]),k=Object(r.useCallback)(Object(x.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.prev=1,e.next=4,t.validateFields();case 4:a=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return");case 10:return p(!0),e.next=13,F.register(a);case 13:p(!1),M.a.success({message:"Success",description:"Register success, try to login your account"}),v.push("/auth/login"),e.next=22;break;case 18:e.prev=18,e.t1=e.catch(0),console.error(e.t1),z.error(e.t1.message);case 22:case"end":return e.stop()}}),e,null,[[0,18],[1,7]])}))),[v,t]),w=g.SendOtpButton;return Object(C.jsxs)(U.a,{form:t,onFinish:y,children:[Object(C.jsxs)("label",{className:"block mb-2",children:["E-mail ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"email",rules:X.email,children:Object(C.jsx)(L.a,{placeholder:"E-mail..."})}),Object(C.jsxs)("label",{className:"block mb-2",children:["Username ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"username",rules:X.username,children:Object(C.jsx)(L.a,{placeholder:"Username..."})}),Object(C.jsxs)("label",{className:"block mb-2",children:["Password ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"password",rules:J.password,children:Object(C.jsx)(L.a,{placeholder:"Password...",type:"password"})}),Object(C.jsxs)("label",{className:"block mb-2",children:["Confirm password ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"confirmPassword",rules:J.confirmPassword,children:Object(C.jsx)(L.a,{placeholder:"Confirm password...",type:"password"})}),Object(C.jsxs)("label",{className:"block mb-2",children:["First name ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"firstName",rules:J.firstName,children:Object(C.jsx)(L.a,{placeholder:"First name..."})}),Object(C.jsxs)("label",{className:"block mb-2",children:["Last name ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"lastName",rules:J.lastName,children:Object(C.jsx)(L.a,{placeholder:"Last name..."})}),!s&&Object(C.jsx)(U.a.Item,{children:Object(C.jsx)(f.a,{type:"primary",shape:"round",className:"w-full",htmlType:"submit",loading:d,children:"Submit"})}),!!s&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("label",{className:"block mb-2",children:["OTP ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"otp",rules:X.otp,children:Object(C.jsx)(L.a,{placeholder:"OTP..."})}),Object(C.jsxs)(U.a.Item,{children:[Object(C.jsx)(w,{className:"w-full mb-4",onClick:function(){return g.sendOtp(s)}}),Object(C.jsx)(f.a,{type:"primary",shape:"round",className:"w-full",onClick:function(){return k()},loading:O,children:"Register"})]})]})]})}function ee(e){var t=e.location,a=Object(i.g)(),c=Object(r.useMemo)((function(){var e;if(t.state&&"object"===typeof t.state)return(null===(e=t.state)||void 0===e?void 0:e.redirect)||"/"}),[t]);return F.isAuthed&&a.push(c),Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{className:"flex justify-center items-center",children:Object(C.jsxs)("div",{className:"px-10 py-5 rounded-lg shadow",style:{width:"400px"},children:[Object(C.jsxs)(B.a,{defaultActiveKey:t.pathname,onChange:function(e){return a.push({pathname:e,state:{redirect:c}})},children:[Object(C.jsx)(B.a.TabPane,{tab:"Login"},Z.LOGIN),Object(C.jsx)(B.a.TabPane,{tab:"Register"},Z.REGISTER)]}),Object(C.jsxs)(i.d,{children:[Object(C.jsx)(i.a,{exact:!0,from:"/auth",to:"/auth/login"}),Object(C.jsx)(i.b,{path:"/auth/login",component:q}),Object(C.jsx)(i.b,{path:"/auth/register",component:$})]})]})})})}!function(e){e.LOGIN="/auth/login",e.REGISTER="/auth/register"}(Z||(Z={}));var te=a(98),ae=a(108),re=a.p+"static/media/fdm-white.28c91e10.svg";function ce(e){var t=e.className,a=Object(ae.a)(e,["className"]);return Object(C.jsx)("div",Object(Y.a)(Object(Y.a)({className:"w-10 h-10 bg-blue-400 p-2 rounded "+(t||"")},a),{},{children:Object(C.jsx)("img",{src:re,alt:"Fademy logo"})}))}function se(){return Object(C.jsxs)("div",{className:"flex flex-col items-center justify-center py-5",children:[Object(C.jsxs)("div",{className:"relative text-blue-400 flex items-center justify-center",children:[Object(C.jsx)(ce,{className:"absolute",style:{transform:"scale(0.6)"}}),Object(C.jsx)(te.a,{className:"text-6xl text-blue-400 border-blue-400"})]}),Object(C.jsx)("div",{className:"text-blue-400",children:"Loading, please wait..."})]})}var ne,ie=a(675),le=a(676),oe=a(677),ue=a(678),de=a(679),je=a(662),be=a(666),me=a(667),he=a(654),xe=a(55),Oe=a.n(xe),pe=a(48),fe=a(656);function ve(e){return Object(C.jsx)(fe.a,Object(Y.a)(Object(Y.a)({},e),{},{preview:!1,fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="}))}!function(e){e[e.ACTIVE=1]="ACTIVE",e[e.DISABLED=2]="DISABLED"}(ne||(ne={}));var ge=function(){function e(){Object(g.a)(this,e)}return Object(N.a)(e,null,[{key:"getDetail",value:function(e){return E.get(y.enrollment.getDetail(e))}},{key:"enroll",value:function(e){return E.create(y.enrollment.enroll(e),null)}}]),e}(),Ne=a(341),ye=function(){function e(){Object(g.a)(this,e)}return Object(N.a)(e,null,[{key:"paginate",value:function(e,t){return E.get(y.review.paginate(e),{params:t})}},{key:"review",value:function(e,t){return E.create(y.review.add(e),t)}}]),e}();function ke(e){var t,a=e.courseId,c=Object(r.useState)(1),s=Object(l.a)(c,2),n=s[0],i=s[1],o=O(Object(r.useCallback)((function(){return ye.paginate(a,{page:n,pageSize:10})}),[n,a]));return Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{children:o.data?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"mb-2",children:["Total: ",o.data.total," reviews"]}),Object(C.jsx)("div",{className:"flex flex-wrap",children:o.data.items.map((function(e){return Object(C.jsxs)("div",{className:"rounded-lg border py-3 px-5 mb-2 w-1/2",children:[Object(C.jsx)("p",{className:"mb-0",children:Object(C.jsxs)("b",{children:[e.user.firstName," ",e.user.lastName," (",e.user.username,")"]})}),Object(C.jsxs)("p",{className:"flex mb-2 items-center",children:[Object(C.jsx)(je.a,{disabled:!0,value:e.star})," ",Object(C.jsx)("i",{className:"ml-4 inline-block mt-1",children:Oe()(e.createdDate).format("DD/MM/YYYY HH:mm")})]}),Object(C.jsx)("p",{className:"mb-0",children:e.feedback})]})}))})]}):Object(C.jsx)("div",{className:"flex justify-center items-center",children:Object(C.jsx)(se,{})})}),Object(C.jsx)("div",{className:"flex justify-center mt-4",children:Object(C.jsx)(Ne.a,{current:n,pageSize:10,total:(null===(t=o.data)||void 0===t?void 0:t.total)||0,onChange:function(e){return i(e)}})})]})}var we=function(){function e(){Object(g.a)(this,e)}return Object(N.a)(e,null,[{key:"updateStatus",value:function(e,t){return E.put(y.watchList.updateStatus(e),{status:t})}},{key:"updateStatusWithNotify",value:function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.updateStatus(t,a);case 3:return r=e.sent,c=a===ne.ACTIVE?"Love":"Un-love",r?M.a.success({message:"Success",description:"".concat(c," course success"),style:{zIndex:10}}):M.a.error({message:"Error",description:"".concat(c," failed, please try again"),style:{zIndex:10}}),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),z.error(e.t0.message),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),Ae={feedback:[{required:!0,message:"Feedback is required"},{max:1e3,message:"Feedback is too long"}],star:[{required:!0,message:"Star is required"},{type:"number",min:0,max:5,message:"Star is invalid"}]},Ee=["Add your rate","Hate","Don't like","Ok","Like","Great like"];function Se(e){var t=Object(r.useState)(!1),a=Object(l.a)(t,2),c=a[0],s=a[1],n=Object(r.useState)(0),i=Object(l.a)(n,2),o=i[0],u=i[1],d=Object(r.useState)(0),j=Object(l.a)(d,2),b=j[0],m=j[1],O=U.a.useForm(),p=Object(l.a)(O,1)[0],v=e.courseId,g=e.onReviewSuccess,N=Object(r.useCallback)(function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,ye.review(v,t);case 4:p.resetFields(),u(0),m(0),M.a.success({message:"Success",description:"Thank you for your feedback"}),g(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),z.error(e.t0.message);case 15:s(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),[v,g,p]);return Object(C.jsxs)(U.a,{form:p,onFinish:N,children:[Object(C.jsx)(U.a.Item,{name:"feedback",style:{marginBottom:".5rem"},rules:Ae.feedback,children:Object(C.jsx)(L.a.TextArea,{placeholder:"Add your feedback...",rows:4,maxLength:1e3,showCount:!0})}),Object(C.jsxs)("div",{className:"relative flex items-center",children:[Object(C.jsx)(U.a.Item,{name:"star",style:{marginBottom:".5rem"},rules:Ae.star,children:Object(C.jsx)(je.a,{onHoverChange:u,onChange:m})}),Object(C.jsx)("span",{className:"text-red-400 absolute",style:{left:"145px",top:"7px"},children:Ee[o||b]||"Add your rate"})]}),Object(C.jsx)(U.a.Item,{children:Object(C.jsx)(f.a,{loading:c,type:"primary",shape:"round",htmlType:"submit",children:"Submit feedback"})})]})}var Ce=function(){function e(){Object(g.a)(this,e)}return Object(N.a)(e,null,[{key:"formatCurrency",value:function(e){return(""+e).replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"parseCurrency",value:function(e){return(""+e).replace(/\$\s?|(,*)/g,"")}},{key:"formatSeconds",value:function(e){var t="mm:ss";return e>=3600&&(t="HH:"+t),Oe()("2015-01-01").startOf("day").seconds(e).format(t)}}]),e}(),Ie=a(674),Te=a(347),Qe=a(663),Be=function(){function e(){Object(g.a)(this,e)}return Object(N.a)(e,null,[{key:"findOne",value:function(e,t){return E.get(y.studyProcess.findOne(e),{params:{contentId:t}})}},{key:"findByCourseId",value:function(e){return E.get(y.studyProcess.findByCourseId(e))}},{key:"update",value:function(e,t,a){return E.put(y.studyProcess.update(e),{contentId:t,duration:a})}}]),e}(),Pe=a(516).Player;function Re(e){var t=e.studyProcess,a=Object(r.useState)(!1),c=Object(l.a)(a,2),s=c[0],n=c[1],i=Object(r.useRef)(),o=Object(r.useRef)(),u=e.content.id,d=e.courseId;return Object(r.useEffect)((function(){var e;return s&&(console.log(i),e=i.current.subscribeToStateChange((function(e){o.current=e,!e.ended||t&&t.done||Be.update(d,u,Math.floor(e.duration))}))),function(){s&&(o.current&&o.current.currentTime>0&&Be.update(d,u,Math.floor(o.current.currentTime)),e())}}),[s,d,u,t]),Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content.description}}),Object(C.jsx)(he.a,{}),s?Object(C.jsx)(Pe,{autoPlay:!0,startTime:(null===t||void 0===t?void 0:t.duration)||0,ref:function(e){return i.current=e},src:"".concat(H,"/").concat(e.content.videoPath)}):Object(C.jsx)("div",{className:"mt-2",children:Object(C.jsx)("span",{className:"cursor-pointer text-blue-400 hover:underline",onClick:function(){return n(!0)},children:"\u2022 View content video"})})]})}function Fe(e){var t=e.contents,a=e.courseId,c=O(Object(r.useCallback)((function(){return Be.findByCourseId(a)}),[a])),s=Object(r.useMemo)((function(){return c.data?c.data.reduce((function(e,t){return e[t.contentId]=t,e}),{}):{}}),[c.data]);return Object(C.jsx)(Qe.a,{children:t.sort((function(e,t){return e.order-t.order})).map((function(t){var a=s[t.id],r=!!(null===a||void 0===a?void 0:a.done),c=!t.preview&&!e.isEnrolled;return Object(C.jsx)(Qe.a.Panel,{className:r?"bg-green-300":"",collapsible:c?"disabled":"header",header:Object(C.jsxs)("div",{className:"flex items-center",children:[Object(C.jsxs)("div",{children:["[",Ce.formatSeconds((null===a||void 0===a?void 0:a.duration)||0)," /"," ",Ce.formatSeconds(t.duration),"]"," ",t.title]}),c&&Object(C.jsx)("div",{className:"ml-auto",children:Object(C.jsx)(Ie.a,{})}),r&&Object(C.jsx)("div",{className:"ml-auto",children:Object(C.jsx)(Te.a,{})})]}),children:Object(C.jsx)(Re,{studyProcess:a,courseId:e.courseId,content:t})},t.id)}))})}function De(e){var t,a,c,s,n=Object(i.g)(),o=Object(r.useState)(!1),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)(!1),m=Object(l.a)(b,2),p=m[0],v=m[1],g=Object(r.useState)(e.course.isWatchList),N=Object(l.a)(g,2),y=N[0],k=N[1],w=Object(r.useCallback)(Object(x.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(F.isAuthed){t.next=2;break}return t.abrupt("return",n.push("/auth/login"));case 2:return v(!0),t.next=5,we.updateStatusWithNotify(e.course.id,e.course.isWatchList?ne.DISABLED:ne.ACTIVE);case 5:t.sent&&k(!e.course.isWatchList),v(!1);case 8:case"end":return t.stop()}}),t)}))),[n,e.course]),A=e.onRefreshNeeded,E=Object(r.useCallback)(Object(x.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(F.isAuthed){t.next=2;break}return t.abrupt("return",n.push("/auth/login"));case 2:return j(!0),t.prev=3,t.next=6,ge.enroll(e.course.id);case 6:M.a.success({message:"Success",description:"Enroll success, hope that you will have valuable lessons",style:{zIndex:10}}),A(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),console.error(t.t0),z.error(t.t0.message);case 14:j(!1);case 15:case"end":return t.stop()}}),t,null,[[3,10]])}))),[n,e.course,A]),S=O(Object(r.useCallback)((function(){return F.isAuthed?ge.getDetail(e.course.id):null}),[e.course.id])),I=F.isAuthed&&!!S.data;return Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsx)("div",{className:"absolute bg-gray-900 w-full left-0",style:{zIndex:1,height:"400px",marginTop:"-2rem",backgroundImage:"url(".concat(H,"/").concat(e.course.coverPath,")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}),Object(C.jsx)("div",{className:"absolute bg-gray-900 w-full left-0",style:{zIndex:2,height:"400px",marginTop:"-2rem",opacity:.75}}),Object(C.jsxs)("div",{className:"w-3/4 pr-4",style:{zIndex:2},children:[Object(C.jsxs)("p",{className:"text-white",children:[Object(C.jsx)(pe.b,{to:"/courses/".concat(e.course.category.parent.id),className:"text-blue-400 ",children:e.course.category.parent.name})," ",">"," ",Object(C.jsx)(pe.b,{to:"/courses/".concat(e.course.category.id),className:"text-blue-400",children:e.course.category.name})]}),Object(C.jsx)("h1",{className:"text-3xl text-white",children:Object(C.jsx)("b",{children:e.course.title})}),Object(C.jsx)("h3",{className:"text-lg text-white",children:e.course.subDescription}),Object(C.jsxs)("p",{className:"mb-2 text-white",children:[Object(C.jsx)("span",{className:"text-yellow-300 mr-1",children:e.course.avgStar})," ",Object(C.jsx)(je.a,{disabled:!0,value:e.course.avgStar})," (",e.course.totalReview,")"]}),Object(C.jsxs)("div",{className:"mt-1 mb-4",children:[e.course.totalEnrollment>=400&&Object(C.jsx)(be.a,{color:"gold",children:"Best seller"}),Oe()().diff(Oe()(e.course.createdDate),"day")<=7&&Object(C.jsx)(be.a,{color:"green",children:"New"})]}),Object(C.jsxs)("p",{className:"mb-2 text-white",children:["Created by"," ",Object(C.jsxs)("i",{className:"text-blue-400",children:[e.course.creator.firstName," ",e.course.creator.lastName]})]}),Object(C.jsxs)("p",{className:"text-white",children:["Last updated:"," ",Object(C.jsx)("i",{className:"text-blue-400",children:Oe()(e.course.updatedDate).format("DD/MM/YYYY HH:mm")})]}),Object(C.jsx)("div",{children:Object(C.jsx)(f.a,{loading:p,type:y?"default":"primary",danger:!0,shape:"round",onClick:w,children:Object(C.jsxs)("div",{className:"flex items-center",children:[y?"Remove":"Add"," watch list"," ",Object(C.jsx)(ie.a,{className:"ml-2"})]})})}),Object(C.jsxs)("div",{className:"mt-24",children:[Object(C.jsx)("h3",{className:"text-xl",children:Object(C.jsx)("b",{children:"Description"})}),Object(C.jsx)("div",{dangerouslySetInnerHTML:{__html:e.course.description}}),Object(C.jsx)("h3",{className:"mt-8 text-xl",children:Object(C.jsx)("b",{children:"Course contents"})}),Array.isArray(e.course.contents)&&e.course.contents.length>0&&Object(C.jsx)(Fe,{courseId:e.course.id,contents:e.course.contents,isEnrolled:I}),Object(C.jsx)("h3",{className:"mt-8 text-xl",children:Object(C.jsx)("b",{children:"About the creator"})}),Object(C.jsxs)("div",{className:"border py-2 px-6 rounded-lg",style:{borderLeftColor:"rgb(96, 165, 250)",borderLeftWidth:".2rem"},children:[Object(C.jsxs)("h4",{className:"text-red-500 text-xl mb-1",children:[null===(t=e.course.creator)||void 0===t?void 0:t.firstName," ",null===(a=e.course.creator)||void 0===a?void 0:a.lastName]}),Object(C.jsx)("p",{className:"text-gray-500",children:e.course.creator.bio}),Object(C.jsx)("p",{className:"mb-0",children:e.course.creator.introduction})]}),Object(C.jsx)("h3",{className:"mt-8 text-xl mb-4",children:Object(C.jsx)("b",{children:"Student feedbacks"})}),I&&Object(C.jsx)(Se,{courseId:e.course.id,onReviewSuccess:e.onRefreshNeeded}),Object(C.jsx)(ke,{courseId:e.course.id})]})]}),Object(C.jsx)("div",{className:"w-1/4 relative",style:{zIndex:2},children:Object(C.jsxs)("div",{className:"p-5 border rounded-lg w-full bg-white",children:[Object(C.jsx)("div",{className:"flex justify-center mb-5",children:Object(C.jsx)(ve,{alt:e.course.title,className:"w-full rounded-lg",src:"".concat(H,"/").concat(e.course.avatarPath)})}),!I&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("h1",{className:"mb-2",children:[Object(C.jsxs)("b",{className:"text-red-400 text-xl",children:["$"," ",Math.round(100*(e.course.price-e.course.discount))/100]})," ",Object(C.jsx)("span",{className:"line-through ml-1 text-gray-400",children:e.course.discount?"(".concat(e.course.price,")"):""})]}),Object(C.jsx)(me.a,{placement:"top",title:"Are you sure to enroll this course?",onConfirm:E,children:Object(C.jsx)(f.a,{size:"large",danger:!0,className:"w-full",type:"primary",loading:d,children:"Enroll now"})})]}),Object(C.jsx)(he.a,{}),Object(C.jsxs)("div",{children:[Object(C.jsx)("h3",{className:"mb-4",children:Object(C.jsx)("b",{children:"This course includes:"})}),Object(C.jsxs)("p",{className:"flex items-center",children:[Object(C.jsx)(le.a,{className:"mr-2"})," ",(null===(c=e.course.contents)||void 0===c?void 0:c.length)||0," articles"]}),Object(C.jsxs)("p",{className:"flex items-center",children:[Object(C.jsx)(oe.a,{className:"mr-2"})," ",Ce.formatSeconds(null===(s=e.course.contents)||void 0===s?void 0:s.reduce((function(e,t){return e+t.duration}),0))," ","video time"]}),Object(C.jsxs)("p",{className:"flex items-center",children:[Object(C.jsx)(ue.a,{className:"mr-2"})," Full lifetime access"]}),Object(C.jsxs)("p",{className:"flex items-center",children:[Object(C.jsx)(de.a,{className:"mr-2"})," Access on mobile and TV"]})]})]})})]})}var Me=function(){function e(){Object(g.a)(this,e)}return Object(N.a)(e,null,[{key:"search",value:function(e){return E.get(y.course.search,{params:e})}},{key:"topOfWeeks",value:function(){return E.get(y.course.topOfWeeks)}},{key:"top",value:function(e){return E.get(y.course.top(e))}},{key:"add",value:function(e){return E.create(y.course.add,e)}},{key:"update",value:function(e){return E.put(y.course.update(e.id),e)}},{key:"getDetail",value:function(e){return E.get(y.course.getDetail(e))}}]),e}();function Ue(e){var t=Number(e.match.params.courseId),a=O(Object(r.useCallback)((function(){return Me.getDetail(t)}),[t]));return a.data?Object(C.jsx)(De,{course:a.data,onRefreshNeeded:a.reFetch}):Object(C.jsx)("div",{className:"flex justify-center items-center",children:Object(C.jsx)(se,{})})}var Le,Ke,Je=a(150),He=a(82);!function(e){e.ASC="asc",e.DESC="desc"}(Ke||(Ke={}));var qe=(Le={},Object(He.a)(Le,Ke.ASC,"Asc"),Object(He.a)(Le,Ke.DESC,"Desc"),Le);function ze(e){return Object(C.jsx)(Je.a,Object(Y.a)(Object(Y.a)({placeholder:"Direction"},e),{},{children:Object.values(Ke).map((function(e){return Object(C.jsx)(Je.a.Option,{value:e,children:qe[e]})}))}))}var Ye=a(659),Ve={0:"$0",500:"$500"};function Ge(e){return Object(C.jsx)(Ye.a,Object(Y.a)(Object(Y.a)({marks:Ve},e),{},{range:!0,min:0,max:500}))}var We={0:"0",5:"5"};function Ze(e){return Object(C.jsx)(Ye.a,Object(Y.a)(Object(Y.a)({marks:We},e),{},{range:!0,min:0,max:5}))}var _e=a(665);function Xe(){var e=Object(r.useState)(Object(_e.a)()),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(r.useCallback)((function(){c(Object(_e.a)())}),[]);return Object(r.useMemo)((function(){return{compKey:a,renewCompKey:s}}),[a,s])}function $e(e){var t=e.items,a=e.getValue,r=e.getLabel,c=Object(ae.a)(e,["items","getValue","getLabel"]);return Object(C.jsx)(Je.a,Object(Y.a)(Object(Y.a)({className:"w-full",loading:!t},c),{},{children:t&&t.map((function(e){return Object(C.jsx)(Je.a.Option,{value:a?a(e):e.id,children:r?r(e):e.name},a?a(e):e.id)}))}))}var et=function(){function e(){Object(g.a)(this,e)}return Object(N.a)(e,null,[{key:"flatMap",value:function(e){return e.reduce((function(e,t){return e.concat(t)}),[])}},{key:"isEmpty",value:function(e){return!Array.isArray(e)||0===e.length}}]),e}(),tt=function(){function e(){Object(g.a)(this,e)}return Object(N.a)(e,null,[{key:"all",value:function(){return E.get(y.category.all)}},{key:"topOfWeeks",value:function(){return E.get(y.category.topOfWeeks)}},{key:"add",value:function(e){return E.create(y.category.add,e)}},{key:"updateStatus",value:function(e,t){return E.put(y.category.udpateStatus(e),{status:t})}}]),e}();function at(e){var t=e.onlyChildren,a=Object(ae.a)(e,["onlyChildren"]),c=O(tt.all),s=Object(r.useMemo)((function(){if(c.data){var e=c.data.map((function(e){return e.children}));return t||(e=[c.data].concat(Object(_.a)(e))),et.flatMap(e)}return c.data}),[c.data,t]);return Object(C.jsx)($e,Object(Y.a)({placeholder:"Category...",items:s},a))}var rt=a(680),ct=a(71);function st(e,t){switch(t.type){case"SET_SEARCH_TERM":return Object(Y.a)(Object(Y.a)({},e),{},{searchTerm:t.payload||""});case"SET_USER":return Object(Y.a)(Object(Y.a)({},e),{},{user:t.payload})}}var nt,it,lt={user:null,searchTerm:""},ot=Object(r.createContext)(lt);function ut(e){var t=Object(r.useReducer)(st,lt),a=Object(l.a)(t,2),c=a[0],s=a[1];return Object(C.jsx)(ot.Provider,{value:[c,s],children:e.children})}function dt(){var e=Object(r.useContext)(ot),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(r.useCallback)((function(e,t){c({type:e,payload:t})}),[c]);return Object(r.useMemo)((function(){return[a,s]}),[a,s])}function jt(){var e=Object(r.useState)(!0),t=Object(l.a)(e,2),a=t[0],c=t[1],s=dt(),n=Object(l.a)(s,2),i=n[0].user,o=n[1];return Object(r.useEffect)((function(){Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F.isAuthed){e.next=6;break}return e.t0=o,e.next=4,F.getUser();case 4:e.t1=e.sent,(0,e.t0)("SET_USER",e.t1);case 6:c(!1);case 7:case"end":return e.stop()}}),e)})))()}),[o]),Object(r.useMemo)((function(){return{authedUser:i,loading:a}}),[i,a])}function bt(e){var t,a,c,s=e.course,n=jt().authedUser,i=Object(r.useState)(!1),o=Object(l.a)(i,2),u=o[0],d=o[1],j=Object(r.useState)(s.isWatchList),b=Object(l.a)(j,2),m=b[0],O=b[1],p=Object(r.useCallback)(function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,we.updateStatusWithNotify(s.id,t);case 3:e.sent&&O(t===ne.ACTIVE),d(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s.id]);return Object(C.jsxs)("div",{className:"h-fulli block rounded-lg p-5 border shadow hover:shadow-lg h-auto",children:[Object(C.jsx)(pe.b,{to:"/courses/detail/".concat(s.id),className:"flex justify-center mb-5",children:Object(C.jsx)(ve,{alt:s.title,className:"w-full rounded-lg",style:{height:"135px"},src:"".concat(H,"/").concat(s.avatarPath)})}),Object(C.jsxs)("div",{className:"flex items-start relative",children:[Object(C.jsx)(pe.b,{className:"block pr-8",to:"/courses/detail/".concat(s.id),children:Object(C.jsx)("h1",{children:s.title})}),Object(C.jsx)("div",{children:Object(C.jsx)("div",{className:"absolute",style:{top:"-5px",right:"5px"},children:F.isAuthed&&(u?Object(C.jsx)(te.a,{className:"text-xl"}):Object(C.jsx)(ct.a,{placement:"left",title:m?"Un-love":"Love",children:Object(C.jsx)("div",{className:"text-xl "+(m?"text-red-400":"text-gray-700"),children:m?Object(C.jsx)(rt.a,{className:"text-red-400",onClick:function(){return p(ne.DISABLED)}}):Object(C.jsx)(ie.a,{onClick:function(){return p(ne.ACTIVE)}})})}))})})]}),Object(C.jsxs)("p",{className:"my-0 text-gray-700",children:[Object(C.jsx)("span",{className:"text-yellow-300 mr-1",children:s.avgStar})," ",Object(C.jsx)(je.a,{disabled:!0,value:s.avgStar})," (",s.totalReview,")"]}),Object(C.jsx)("p",{className:"my-0 text-gray-700",children:null===(t=s.category)||void 0===t?void 0:t.name}),Object(C.jsxs)("p",{className:"my-0 text-blue-400",children:[null===(a=s.creator)||void 0===a?void 0:a.firstName," ",null===(c=s.creator)||void 0===c?void 0:c.lastName]}),s.isEnrollment?Object(C.jsxs)("p",{className:"my-0 text-red-400 flex items-center",children:[Object(C.jsx)(oe.a,{className:"mr-1"})," You are studying this course"]}):Object(C.jsxs)("p",{className:"my-0",children:[Object(C.jsxs)("b",{className:"text-red-400",children:["$ ",Math.round(100*(s.price-s.discount))/100]})," ",Object(C.jsx)("span",{className:"line-through ml-1 text-gray-400",children:s.discount?"(".concat(s.price,")"):""})]}),Object(C.jsxs)("div",{className:"mt-1",children:[s.totalEnrollment>=400&&Object(C.jsx)(be.a,{color:"gold",children:"Best seller"}),Oe()().diff(Oe()(s.createdDate),"day")<=7&&Object(C.jsx)(be.a,{color:"green",children:"New"})]}),s.creatorId===(null===n||void 0===n?void 0:n.id)&&Object(C.jsx)(pe.b,{to:"/teacher/edit-course/".concat(s.id),className:"mt-3 block w-fulli",children:Object(C.jsx)(f.a,{danger:!0,type:"primary",shape:"round",className:"w-full",children:"Edit course"})})]})}!function(e){e.PRICE="price",e.REVIEW="avgStar"}(it||(it={}));var mt=(nt={},Object(He.a)(nt,it.PRICE,"Price"),Object(He.a)(nt,it.REVIEW,"Review"),nt);function ht(e){return Object(C.jsx)(Je.a,Object(Y.a)(Object(Y.a)({placeholder:"Order by"},e),{},{children:Object.values(it).map((function(e){return Object(C.jsx)(Je.a.Option,{value:e,children:mt[e]},e)}))}))}function xt(e){var t=Object(r.useState)(1),a=Object(l.a)(t,2),c=a[0],s=a[1],n=Object(r.useState)(20),i=Object(l.a)(n,2),o=i[0],u=i[1],d=Object(r.useState)(e.searchTerm||""),j=Object(l.a)(d,2),b=j[0],m=j[1],h=Object(r.useState)(null),x=Object(l.a)(h,2),p=x[0],f=x[1],v=Object(r.useState)(null),g=Object(l.a)(v,2),N=g[0],y=g[1],k=Object(r.useState)({categoryIds:e.categoryId&&!isNaN(e.categoryId)&&e.categoryId>0?[e.categoryId]:[]}),w=Object(l.a)(k,2),A=w[0],E=w[1],S=Xe(),I=S.renewCompKey,T=Object(r.useCallback)((function(e){E(Object(Y.a)(Object(Y.a)({},A),e)),s(1)}),[A]);Object(r.useEffect)((function(){m(e.searchTerm||""),I()}),[e.searchTerm,I]);var Q=e.fetchSource,B=O(Object(r.useCallback)((function(){return Q(Object(Y.a)({page:c,pageSize:o,searchTerm:b||void 0,orderBy:p,orderDirection:N},A))}),[Q,c,o,b,p,N,A])).data;return Object(C.jsxs)("div",{className:"mb-4 flex",children:[Object(C.jsxs)("div",{className:"w-5/6",children:[Object(C.jsxs)("div",{className:"flex items-center mb-4",children:[Object(C.jsxs)("div",{children:["Showing page ",Object(C.jsx)("b",{children:c})," with page size ",Object(C.jsx)("b",{children:o})," of total"," ",Object(C.jsx)("b",{children:(null===B||void 0===B?void 0:B.total)||0})," courses"]}),Object(C.jsxs)("div",{className:"ml-auto flex",children:[Object(C.jsxs)("div",{className:"flex items-center",children:[Object(C.jsx)("span",{className:"mr-2",children:"Order by:"}),Object(C.jsx)(ht,{value:p,onChange:function(e){f(e),N||y(Ke.DESC)}})]}),Object(C.jsxs)("div",{className:"flex items-center ml-4",children:[Object(C.jsx)("span",{className:"mr-2",children:"Order direction:"}),Object(C.jsx)(ze,{disabled:!p,value:N,onChange:y})]})]})]}),Object(C.jsx)(L.a.Search,{allowClear:!0,className:"w-full mb-4",placeholder:"Search courses...",defaultValue:b,onSearch:m},S.compKey),B?Object(C.jsx)("div",{className:"flex flex-wrap",children:B.items.map((function(e,t){return Object(C.jsx)("div",{className:"w-1/4 px-2 mb-4",children:Object(C.jsx)(bt,{course:e},t)})}))}):Object(C.jsx)(se,{}),Object(C.jsx)("div",{className:"mt-4 flex justify-center",children:Object(C.jsx)(Ne.a,{current:c,pageSize:o,total:(null===B||void 0===B?void 0:B.total)||0,showSizeChanger:!0,pageSizeOptions:["20","50"],onChange:function(e,t){s(e),u(t||20)}})})]}),Object(C.jsx)("div",{className:"w-1/6 ml-5",children:Object(C.jsxs)("div",{className:"rounded-lg shadow p-3",children:[Object(C.jsx)("label",{className:"block mb-4",children:Object(C.jsx)("b",{children:"Category"})}),Object(C.jsx)(at,{defaultValue:A.categoryIds,mode:"multiple",onChange:function(e){return T({categoryIds:e})}}),Object(C.jsx)(he.a,{}),Object(C.jsx)("label",{className:"block my-4",children:Object(C.jsx)("b",{children:"Price"})}),Object(C.jsx)(Ge,{range:!0,defaultValue:[0,500],onAfterChange:function(e){var t=Object(l.a)(e,2),a=t[0],r=t[1];T({fromPrice:a,toPrice:r})}}),Object(C.jsx)(he.a,{}),Object(C.jsx)("label",{className:"block my-4",children:Object(C.jsx)("b",{children:"Star"})}),Object(C.jsx)(Ze,{range:!0,defaultValue:[0,5],onAfterChange:function(e){var t=Object(l.a)(e,2),a=t[0],r=t[1];T({fromStar:a,toStar:r})}})]})})]})}function Ot(e){var t=Number(e.match.params.creatorId),a=Object(r.useCallback)((function(e){return Me.search(Object(Y.a)(Object(Y.a)({},e),{},{creatorId:t}))}),[t]);return Object(C.jsx)("div",{children:Object(C.jsx)(xt,{fetchSource:a})})}function pt(e){var t=Number(e.match.params.categoryId),a=dt(),c=Object(l.a)(a,2),s=c[0],n=c[1],i=Object(r.useCallback)((function(e){return n("SET_SEARCH_TERM",e.searchTerm||""),Me.search(e)}),[n]);return Object(C.jsx)("div",{children:Object(C.jsx)(xt,{categoryId:t,fetchSource:i,searchTerm:s.searchTerm})})}var ft=a(664);function vt(e){var t,a=null===(t=e.match.params)||void 0===t?void 0:t.courseId,r=Object(i.g)();return Object(C.jsx)(ft.a,{status:"success",title:"Save course success",subTitle:"Your course is successfully saved, and ready to show",extra:[Object(C.jsx)(f.a,{type:"primary",shape:"round",onClick:function(){return r.push("/courses/detail/".concat(a))},children:"View course"})]})}function gt(){return Object(C.jsxs)(i.d,{children:[Object(C.jsx)(i.b,{path:"/courses/detail/:courseId",component:Ue}),Object(C.jsx)(i.b,{path:"/courses/creator/:creatorId",component:Ot}),Object(C.jsx)(i.b,{path:"/courses/save-result/:courseId",component:vt}),Object(C.jsx)(i.b,{path:"/courses/:categoryId",component:pt})]})}var Nt=a(681);function yt(){var e=Object(r.useCallback)((function(e){return Me.search(Object(Y.a)(Object(Y.a)({},e),{},{onlyEnrollment:!0}))}),[]);return Object(C.jsxs)("div",{children:[Object(C.jsxs)("h1",{className:"text-3xl text-blue-400 flex items-center",children:[Object(C.jsx)(Nt.a,{className:"mr-2"})," Your enrollment"]}),Object(C.jsx)(xt,{fetchSource:e})]})}var kt,wt=a(682),At=a(683),Et=a(684),St=a(685),Ct=a(194),It=a.n(Ct);!function(e){e.VIEW="totalView",e.NEW="createdDate"}(kt||(kt={}));var Tt,Qt=[{icon:Object(C.jsx)(wt.a,{}),title:"1,000+ Courses",subTitle:"Explore a wide range of skills."},{icon:Object(C.jsx)(At.a,{}),title:"By Industry Experts",subTitle:"Professional development from the best people."},{icon:Object(C.jsx)(ue.a,{}),title:"Unlimited Access",subTitle:"Unlock Library and learn any topic with one subscription."},{icon:Object(C.jsx)(Et.a,{}),title:"Lesson Source Files",subTitle:"Explore a wide range of skills."},{icon:Object(C.jsx)(St.a,{}),title:"Printed Diploma",subTitle:"Professional development from the best people."},{icon:Object(C.jsx)(d.a,{}),title:"Premium Support",subTitle:"Unlock Library and learn any topic with one subscription."}],Bt={dots:!0,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:5};function Pt(){var e=O(Me.topOfWeeks),t=O(tt.topOfWeeks),a=O(Object(r.useCallback)((function(){return Me.top(kt.VIEW)}),[])),c=O(Object(r.useCallback)((function(){return Me.top(kt.NEW)}),[]));return Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{className:"text-center text-blue-400 text-3xl",children:"Welcome to Fademy"}),Object(C.jsx)("p",{className:"text-center text-xl text-gray-500",children:"What other students turned professionals have to say about us after learning with us and reaching their goals."}),Object(C.jsx)("div",{className:"flex flex-wrap mt-12",children:Qt.map((function(e,t){return Object(C.jsxs)("div",{className:"flex items-center w-1/3 mb-2",children:[Object(C.jsx)("div",{className:"rounded-full h-16 w-16 flex items-center justify-center bg-blue-400 text-white text-2xl mb-4",children:e.icon}),Object(C.jsxs)("div",{className:"ml-2 flex flex-col justify-center",children:[Object(C.jsx)("h1",{className:"text-gray-500",children:Object(C.jsx)("b",{children:e.title})}),Object(C.jsx)("p",{className:"text-gray-500",children:e.subTitle})]})]},t)}))})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{className:"text-center text-blue-400 text-3xl mt-16 mb-8",children:"Top courses of week"}),e.data?Object(C.jsx)(It.a,Object(Y.a)(Object(Y.a)({},Bt),{},{children:Object(_.a)(Array(5).keys()).map((function(t,a){return Object(C.jsx)("div",{className:"p-2",children:Object(C.jsx)(bt,{className:"w-full",course:e.data?e.data[a]:{},loading:!e.data},a)})}))})):Object(C.jsx)(se,{})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{className:"text-center text-blue-400 text-3xl mt-16 mb-8",children:"Top categories of week"}),Object(C.jsx)("div",{className:"flex flex-wrap",children:t.data?t.data.map((function(e,t){return Object(C.jsx)("div",{className:"w-1/5 p-2",children:Object(C.jsxs)(pe.c,{to:"/courses/".concat(e.categoryId),className:"text-gray-500 block border rounded-lg p-5 cursor-pointer hover:shadow",children:[e.category.name," (",e.totalEnrollment,")"]},t)})})):Object(C.jsx)("div",{className:"py-5 flex justify-center items-center w-full",children:Object(C.jsx)(se,{})})})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{className:"text-center text-blue-400 text-3xl mt-16 mb-8",children:"Most viewed courses"}),a.data?Object(C.jsx)(It.a,Object(Y.a)(Object(Y.a)({},Bt),{},{children:Object(_.a)(Array(10).keys()).map((function(e,t){return Object(C.jsx)("div",{className:"p-2",children:Object(C.jsx)(bt,{className:"w-full",course:a.data?a.data[t]:{},loading:!a.data},t)})}))})):Object(C.jsx)(se,{})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{className:"text-center text-blue-400 text-3xl mt-16 mb-8",children:"Newest courses"}),c.data?Object(C.jsx)(It.a,Object(Y.a)(Object(Y.a)({},Bt),{},{children:Object(_.a)(Array(10).keys()).map((function(e,t){return Object(C.jsx)("div",{className:"p-2",children:Object(C.jsx)(bt,{className:"w-full",course:c.data?c.data[t]:{},loading:!c.data},t)})}))})):Object(C.jsx)(se,{})]})]})}function Rt(){var e=U.a.useForm(),t=Object(l.a)(e,1)[0],a=Object(r.useState)(!1),c=Object(l.a)(a,2),s=c[0],n=c[1],i=Object(r.useCallback)(function(){var e=Object(x.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.next=3,F.changePassword(a.oldPassword,a.password);case 3:e.sent&&(t.resetFields(),M.a.success({message:"Success",description:"Update password success"})),n(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(C.jsxs)(U.a,{form:t,onFinish:i,children:[Object(C.jsxs)("label",{className:"block mb-2",children:["Old password ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"oldPassword",rules:J.password,children:Object(C.jsx)(L.a,{placeholder:"Old password...",type:"password"})}),Object(C.jsxs)("label",{className:"block mb-2",children:["New password ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"password",rules:J.password,children:Object(C.jsx)(L.a,{placeholder:"New password...",type:"password"})}),Object(C.jsxs)("label",{className:"block mb-2",children:["Confirm new password ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"confirmPassword",rules:J.confirmPassword,children:Object(C.jsx)(L.a,{placeholder:"Confirm new password...",type:"password"})}),Object(C.jsx)(U.a.Item,{children:Object(C.jsx)(f.a,{type:"primary",shape:"round",className:"w-full",htmlType:"submit",loading:s,children:"Submit"})})]})}function Ft(e){var t=Object(r.useState)(!1),a=Object(l.a)(t,2),c=a[0],s=a[1],n=e.onSave,i=Object(r.useCallback)(Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,n();case 3:s(!1);case 4:case"end":return e.stop()}}),e)}))),[n]);return e.edit?Object(C.jsxs)("div",{children:[Object(C.jsx)(f.a,{type:"primary",shape:"round",className:"mb-2 w-full",loading:c,onClick:i,children:e.saveBtnTitle?e.saveBtnTitle:"Save"}),Object(C.jsx)(f.a,{className:"w-full",shape:"round",onClick:function(){return e.onCancel(!1)},children:"Cancel"})]}):Object(C.jsx)(f.a,{className:"w-full",type:"primary",shape:"round",onClick:function(){return e.onEdit(!0)},children:e.editBtnTitle?e.editBtnTitle:"Edit"})}function Dt(e){var t=U.a.useForm(),a=Object(l.a)(t,1)[0],c=Object(r.useState)(!1),s=Object(l.a)(c,2),n=s[0],i=s[1],o=Object(r.useState)(!1),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)(),m=Object(l.a)(b,2),O=m[0],p=m[1],v=Object(r.useCallback)(Object(x.a)(h.a.mark((function e(){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.validateFields();case 3:r=e.sent,t=r.email,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),[a]),g=e.authedUser,N=e.onSaveSuccess,y=W(),k=y.sendOtp,w=y.SendOtpButton,A=Object(r.useCallback)(Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,k(Object(Y.a)(Object(Y.a)({},g),{},{email:t}));case 7:p(t);case 8:case"end":return e.stop()}}),e)}))),[v,k,g]),E=Object(r.useMemo)((function(){return g&&g.updatedEmailDate?30-Oe()().diff(Oe()(null===g||void 0===g?void 0:g.updatedEmailDate),"days"):-1}),[g]),I=Object(r.useCallback)(function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,S.updateEmail(t);case 4:i(!1),N(t.email),M.a.success({message:"Success",description:"Update email success"}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),z.error(e.t0.message);case 13:j(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),[N]);return Object(C.jsxs)(U.a,{form:a,initialValues:{email:g.email},onFinish:I,children:[Object(C.jsxs)("label",{className:"block mb-2",children:["E-mail ",n&&Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"email",rules:X.email,children:Object(C.jsx)(L.a,{disabled:!n,placeholder:"E-mail..."})}),!O&&E<0&&Object(C.jsx)(U.a.Item,{children:Object(C.jsx)(Ft,{edit:n,saveBtnTitle:"Continue",editBtnTitle:"Edit email",onSave:A,onCancel:function(){return i(!1)},onEdit:function(){return i(!0)}})}),E>0&&Object(C.jsxs)("p",{className:"my-0 text-red-400",children:["Please wait for ",E," days to update your email"]}),!!O&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("label",{className:"block mb-2",children:["OTP ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"otp",rules:X.otp,children:Object(C.jsx)(L.a,{placeholder:"OTP..."})}),Object(C.jsxs)(U.a.Item,{children:[Object(C.jsx)(w,{className:"w-full mb-4",onClick:function(){return y.sendOtp(Object(Y.a)(Object(Y.a)({},g),{},{email:O}))}}),Object(C.jsx)(f.a,{type:"primary",shape:"round",className:"w-full",htmlType:"submit",loading:d,children:"Save new email"})]})]})]})}function Mt(e){var t=U.a.useForm(),a=Object(l.a)(t,1)[0],c=Object(r.useState)(!1),s=Object(l.a)(c,2),n=s[0],i=s[1],o=e.authedUser,u=e.onSaveSuccess,d=Object(r.useCallback)(Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.validateFields();case 3:t=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return");case 9:return e.prev=9,e.next=12,S.updateFirstLastName(t);case 12:i(!1),u(t),M.a.success({message:"Success",description:"Update first name, last name success"}),e.next=21;break;case 17:e.prev=17,e.t1=e.catch(9),console.error(e.t1),z.error(e.t1.message);case 21:case"end":return e.stop()}}),e,null,[[0,6],[9,17]])}))),[a,u]);return Object(C.jsxs)(U.a,{form:a,initialValues:{firstName:o.firstName,lastName:o.lastName},children:[Object(C.jsxs)("label",{className:"block mb-2",children:["First name ",n&&Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"firstName",rules:J.firstName,children:Object(C.jsx)(L.a,{disabled:!n,placeholder:"First name..."})}),Object(C.jsxs)("label",{className:"block mb-2",children:["Last name ",n&&Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"lastName",rules:J.lastName,children:Object(C.jsx)(L.a,{disabled:!n,placeholder:"Last name..."})}),Object(C.jsx)(U.a.Item,{children:Object(C.jsx)(Ft,{edit:n,editBtnTitle:"Edit first & last name",onSave:function(){return d()},onCancel:function(){return i(!1)},onEdit:function(){return i(!0)}})})]})}function Ut(e){var t=U.a.useForm(),a=Object(l.a)(t,1)[0],c=Object(r.useState)(!1),s=Object(l.a)(c,2),n=s[0],i=s[1],o=e.authedUser,u=e.onSaveSuccess,d=Object(r.useCallback)(Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.validateFields();case 3:t=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return");case 9:return e.prev=9,e.next=12,S.updateTeacherProfile(t);case 12:i(!1),u(t),M.a.success({message:"Success",description:"Update your teacher profile success"}),e.next=21;break;case 17:e.prev=17,e.t1=e.catch(9),console.error(e.t1),z.error(e.t1.message);case 21:case"end":return e.stop()}}),e,null,[[0,6],[9,17]])}))),[a,u]);return Object(C.jsxs)(U.a,{form:a,initialValues:{bio:o.bio,introduction:o.introduction},children:[Object(C.jsx)("label",{className:"block mb-2",children:"Bio"}),Object(C.jsx)(U.a.Item,{name:"bio",rules:J.bio,children:Object(C.jsx)(L.a,{disabled:!n,placeholder:"Bio..."})}),Object(C.jsx)("label",{className:"block mb-2",children:"Introduction"}),Object(C.jsx)(U.a.Item,{name:"introduction",rules:J.introduction,children:Object(C.jsx)(L.a.TextArea,{rows:5,disabled:!n,placeholder:"Introduction..."})}),Object(C.jsx)(U.a.Item,{children:Object(C.jsx)(Ft,{edit:n,editBtnTitle:"Edit your teacher profile",onSave:function(){return d()},onCancel:function(){return i(!1)},onEdit:function(){return i(!0)}})})]})}function Lt(e){var t=dt()[1],a=jt(),c=a.authedUser,s=a.loading,n=Object(r.useCallback)((function(e){t("SET_USER",Object(Y.a)(Object(Y.a)({},c),{},{email:e,updatedEmailDate:new Date}))}),[t,c]),i=Object(r.useCallback)((function(e){t("SET_USER",Object(Y.a)(Object(Y.a)({},c),e))}),[t,c]),l=Object(r.useCallback)((function(e){t("SET_USER",Object(Y.a)(Object(Y.a)({},c),e))}),[t,c]);return s?Object(C.jsx)("div",{className:"flex items-center justify-center",children:Object(C.jsx)(se,{})}):Object(C.jsxs)("div",{children:[Object(C.jsxs)(U.a.Item,{children:[Object(C.jsx)("label",{className:"block mb-2",children:"Username"}),Object(C.jsx)(L.a,{disabled:!0,defaultValue:null===c||void 0===c?void 0:c.username})]}),Object(C.jsx)(he.a,{}),Object(C.jsx)(Dt,{authedUser:c,onSaveSuccess:n}),Object(C.jsx)(he.a,{}),Object(C.jsx)(Mt,{authedUser:c,onSaveSuccess:i}),c.role===Q.TEACHER&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(he.a,{}),Object(C.jsx)(Ut,{authedUser:c,onSaveSuccess:l})]})]})}function Kt(e){return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{className:"flex justify-center items-center",children:Object(C.jsxs)("div",{className:"px-10 py-5 rounded-lg shadow",style:{width:"400px"},children:[Object(C.jsxs)(B.a,{defaultActiveKey:e.location.pathname,onChange:function(t){return e.history.push(t)},children:[Object(C.jsx)(B.a.TabPane,{tab:"Profile"},Tt.PROFILE),Object(C.jsx)(B.a.TabPane,{tab:"Change password"},Tt.CHANGE_PASSWORD)]}),Object(C.jsxs)(i.d,{children:[Object(C.jsx)(i.b,{exact:!0,path:"/profile",component:Lt}),Object(C.jsx)(i.b,{path:"/profile/change-password",component:Rt})]})]})})})}!function(e){e.PROFILE="/profile",e.CHANGE_PASSWORD="/profile/change-password"}(Tt||(Tt={}));var Jt,Ht=a(226),qt=a(660);!function(e){e.VIDEO="VIDEO",e.IMAGE="IMAGE"}(Jt||(Jt={}));var zt,Yt,Vt=a(333);!function(e){e[e.SUCCESS=1]="SUCCESS",e[e.FAILED=2]="FAILED"}(zt||(zt={}));var Gt=(Yt={},Object(He.a)(Yt,Jt.IMAGE,{maxSize:"5MB",validMimeTypes:["image/gif","image/jpeg","image/png","image/svg+xml","image/webp"]}),Object(He.a)(Yt,Jt.VIDEO,{maxSize:"500MB",validMimeTypes:["video/x-flv","video/mp4","video/3gpp"]}),Yt);function Wt(e){var t=Gt[e.fileType];return Object(C.jsx)(Vt.FilePond,Object(Y.a)({name:"file",maxFiles:1,server:{url:y.uploader.upload,load:function(e,t){var a=new Request(e);fetch(a).then((function(e){e.blob().then((function(e){t(e)}))}))},process:{headers:{"x-file-type":e.fileType,"x-upload-state":e.state,Authorization:"Bearer ".concat(F.accessToken)},onload:function(t){var a=JSON.parse(t);a.code===zt.SUCCESS?e.onUploadSuccess&&e.onUploadSuccess(a.result):M.a.error({message:"Error",description:"Upload failed, please try again"})}}},ref:function(t){e.pondRef&&(e.pondRef.current=t)},dropValidation:!0,instantUpload:!1,acceptedFileTypes:t.validMimeTypes,maxFileSize:t.maxSize},e))}var Zt=a(151),_t=a(342),Xt=a(101),$t=a(334);function ea(e){var t=Object(r.useState)(),a=Object(l.a)(t,2),c=a[0],s=a[1],n=e.html;Object(r.useEffect)((function(){if(n){var e=Object(Xt.convertFromHTML)(n||""),t=Xt.ContentState.createFromBlockArray(e.contentBlocks,e.entityMap);s(Xt.EditorState.createWithContent(t))}else s(Xt.EditorState.createEmpty())}),[n]);var i=e.editorRef;return Object(r.useEffect)((function(){i&&(i.current={getHtmlContent:function(){return Object(_t.a)(null===c||void 0===c?void 0:c.getCurrentContent())}})}),[i,c]),Object(C.jsx)($t.Editor,{wrapperClassName:"border",editorClassName:"px-4",editorState:c,onEditorStateChange:s})}var ta={title:[{required:!0,message:"Title is required"},{min:4,message:"Title is too short"},{max:255,message:"Title is too long"}],description:[{required:!0,message:"Description is required"}]};function aa(e){var t,a=U.a.useForm(),c=Object(l.a)(a,1)[0],s=e.formRef,n=e.content,i=Object(r.useRef)(),o=Object(r.useRef)(),u=Object(r.useRef)(),d=Object(r.useCallback)(Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.validateFields();case 3:t=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:if(o.current.getFile()){e.next=12;break}return M.a.error({message:"Error",description:"Content ".concat(t.order," must have video")}),e.abrupt("return",!1);case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,null,[[0,6]])}))),[c]),j=Object(r.useCallback)(Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:return t=e.sent,o.current.getFile()&&o.current.processFile(),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),[d]),b=Object(r.useCallback)((function(e){i.current(e.filePath)}),[]);Object(r.useEffect)((function(){s&&(s.current={validate:d,getContent:function(){return new Promise(function(){var e=Object(x.a)(h.a.mark((function e(t,a){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:(r=e.sent)?i.current=function(e){r=Object(Y.a)(Object(Y.a)({},r),{},{description:u.current.getHtmlContent(),videoPath:e}),n&&(r.id=n.id),t(r)}:a();case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}})}),[s,j,d,n]);var m=Object(r.useMemo)((function(){return n?[{source:"".concat(H,"/").concat(n.videoPath),options:{type:"local"}}]:[]}),[n]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(U.a,{form:c,initialValues:e.content,children:[Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsxs)("div",{className:"w-1/5 pr-2",children:[Object(C.jsx)("label",{className:"block mb-2",children:"Order"}),Object(C.jsx)(U.a.Item,{name:"order",children:Object(C.jsx)(qt.a,{min:1,placeholder:"Order...",className:"w-fulli"})})]}),Object(C.jsxs)("div",{className:"w-4/5",children:[Object(C.jsxs)("label",{className:"block mb-2",children:["Title ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"title",rules:ta.title,children:Object(C.jsx)(L.a,{placeholder:"Title..."})})]})]}),Object(C.jsx)(U.a.Item,{name:"preview",valuePropName:"checked",children:Object(C.jsx)(Zt.a,{children:"Preview"})}),Object(C.jsx)("label",{className:"block mb-2",children:"Description"}),Object(C.jsx)(U.a.Item,{name:"description",children:Object(C.jsx)(ea,{editorRef:u,html:null===(t=e.content)||void 0===t?void 0:t.description})})]}),Object(C.jsxs)("label",{className:"block mb-2",children:["Video ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(Wt,{files:m,fileType:Jt.VIDEO,state:"videoPath",pondRef:o,onUploadSuccess:b})]})}var ra=a(91),ca=a(686),sa={categoryId:[{required:!0,message:"Category is required"}],title:[{required:!0,message:"Title is required"},{min:8,message:"Title is too short"},{max:255,message:"Title is too long"}],subDescription:[{required:!0,message:"Sub-description is required"},{min:8,message:"Sub-description is too short"}],price:[{required:!0,message:"Price is required"},{type:"number",min:0,max:500,message:"Invalid price"}],discount:[{required:!0,message:"Discount is required"},{type:"number",min:0,max:500,message:"Invalid discount"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t("price")||0)<a)){e.next=3;break}throw new Error("Invalid discount");case 3:case"end":return e.stop()}}),e)})))()},validateTrigger:"submit"}}]};function na(e){var t=e.course,a=!!t,c=Object(i.g)(),s=Object(K.useForm)(),n=Object(l.a)(s,1)[0],o=Object(r.useState)(!1),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(r.useState)([]),m=Object(l.a)(b,2),O=m[0],p=m[1],v=Object(r.useCallback)((function(){p([].concat(Object(_.a)(O),[{preview:!1,order:O.length+1,key:Object(_e.a)(),formRef:{current:null}}]))}),[O]);Object(r.useEffect)((function(){t&&t.contents&&p(t.contents.map((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{key:Object(_e.a)(),formRef:{current:null}})})))}),[t]);var g=Object(r.useRef)(),N=Object(r.useRef)(),y=Object(r.useCallback)(Object(x.a)(h.a.mark((function e(){var t,a,r,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.validateFields();case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",M.a.error({message:"Error",description:"Please correct all error fields before submit"}));case 8:if(g.current.getFile()){e.next=10;break}return e.abrupt("return",M.a.error({message:"Error",description:"Course's avatar is empty"}));case 10:if(N.current.getFile()){e.next=12;break}return e.abrupt("return",M.a.error({message:"Error",description:"Course's cover is empty"}));case 12:if(0!==O.length){e.next=14;break}return e.abrupt("return",M.a.error({message:"Error",description:"There must be at least 1 content"}));case 14:t=!0,a=Object(Ht.a)(O),e.prev=16,a.s();case 18:if((r=a.n()).done){e.next=26;break}return c=r.value,e.next=22,c.formRef.current.validate();case 22:s=e.sent,t=t&&s;case 24:e.next=18;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(16),a.e(e.t1);case 31:return e.prev=31,a.f(),e.finish(31);case 34:if(t){e.next=36;break}return e.abrupt("return",M.a.error({message:"Error",description:"Please correct all error fields before submit"}));case 36:j(!0),g.current.processFile(),N.current.processFile();case 39:case"end":return e.stop()}}),e,null,[[0,5],[16,28,31,34]])}))),[n,O]),k=Object(r.useRef)(),w=Object(r.useCallback)(Object(x.a)(h.a.mark((function e(){var r,s,i,l,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getFieldsValue();case 2:(r=e.sent).contents=[],s=Object(Ht.a)(O),e.prev=5,s.s();case 7:if((i=s.n()).done){e.next=16;break}return l=i.value,e.t0=r.contents,e.next=12,l.formRef.current.getContent();case 12:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 14:e.next=7;break;case 16:e.next=21;break;case 18:e.prev=18,e.t2=e.catch(5),s.e(e.t2);case 21:return e.prev=21,s.f(),e.finish(21);case 24:if(r.description=k.current.getHtmlContent(),r.coverPath=A.current.coverPath,r.avatarPath=A.current.avatarPath,e.prev=27,!a){e.next=35;break}return r.id=null===t||void 0===t?void 0:t.id,o=r.id,e.next=33,Me.update(r);case 33:e.next=38;break;case 35:return e.next=37,Me.add(r);case 37:o=e.sent;case 38:M.a.success({message:"Success",description:"Save course success!"}),c.push("/courses/save-result/".concat(o)),e.next=46;break;case 42:e.prev=42,e.t3=e.catch(27),console.error(e.t3),z.error(e.t3.message);case 46:j(!1);case 47:case"end":return e.stop()}}),e,null,[[5,18,21,24],[27,42]])}))),[n,O,a,c,t]),A=Object(r.useRef)({}),E=Object(r.useCallback)((function(e){A.current[e.state]=e.filePath,2===Object.keys(A.current).length&&w()}),[w]),S=Object(r.useMemo)((function(){return t?{avatar:[{source:"".concat(H,"/").concat(t.avatarPath),options:{type:"local"}}],cover:[{source:"".concat(H,"/").concat(t.coverPath),options:{type:"local"}}]}:{}}),[t]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h1",{className:"text-xl",children:Object(C.jsx)("b",{children:"Course information"})}),Object(C.jsx)(he.a,{}),Object(C.jsxs)(U.a,{form:n,initialValues:e.course,children:[Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsxs)("div",{className:"w-1/2 pr-2",children:[Object(C.jsxs)("label",{className:"block mb-2",children:["Category ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"categoryId",rules:sa.categoryId,children:Object(C.jsx)(at,{onlyChildren:!0})})]}),Object(C.jsxs)("div",{className:"w-1/2",children:[Object(C.jsxs)("label",{className:"block mb-2",children:["Title ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"title",rules:sa.title,children:Object(C.jsx)(L.a,{placeholder:"Title..."})})]})]}),Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsxs)("div",{className:"w-1/2 pr-2",children:[Object(C.jsxs)("label",{className:"block mb-2",children:["Price ($) ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"price",rules:sa.price,children:Object(C.jsx)(qt.a,{className:"w-fulli",min:0,max:500,placeholder:"Price..."})})]}),Object(C.jsxs)("div",{className:"w-1/2",children:[Object(C.jsx)("label",{className:"block mb-2",children:"Discount ($)"}),Object(C.jsx)(U.a.Item,{name:"discount",rules:sa.discount,children:Object(C.jsx)(qt.a,{className:"w-fulli",min:0,max:500,placeholder:"Discount..."})})]})]}),Object(C.jsxs)("label",{className:"block mb-2",children:["Sub-description ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(U.a.Item,{name:"subDescription",rules:sa.subDescription,children:Object(C.jsx)(L.a,{placeholder:"Sub-description..."})}),Object(C.jsx)("label",{className:"block mb-2",children:"Description"}),Object(C.jsx)(U.a.Item,{name:"description",children:Object(C.jsx)(ea,{html:null===t||void 0===t?void 0:t.description,editorRef:k})})]}),Object(C.jsxs)("div",{children:[Object(C.jsxs)("label",{className:"block mb-2",children:["Avatar ",Object(C.jsx)("b",{className:"text-red-400",children:"*"})]}),Object(C.jsx)(Wt,{files:S.avatar,fileType:Jt.IMAGE,state:"avatarPath",onUploadSuccess:E,pondRef:g})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("label",{className:"block mb-2",children:"Cover"}),Object(C.jsx)(Wt,{files:S.cover,fileType:Jt.IMAGE,state:"coverPath",onUploadSuccess:E,pondRef:N})]}),Object(C.jsx)("h1",{className:"text-xl mt-8",children:Object(C.jsx)("b",{children:"Contents"})}),Object(C.jsx)(he.a,{}),Object(C.jsx)("div",{className:"flex flex-wrap",children:O.map((function(e,t){return Object(C.jsx)("div",{className:"w-1/2 pr-2 mb-2",children:Object(C.jsxs)("div",{className:"rounded-lg p-3 border relative",children:[Object(C.jsx)("div",{className:"absolute text-red-400 cursor-pointer",style:{top:".3rem",right:".3rem"},children:Object(C.jsx)(ct.a,{title:"Remove",children:Object(C.jsx)(ra.a,{className:"text-xl",onClick:function(){O.splice(t,1),p(Object(_.a)(O))}})})}),Object(C.jsx)(aa,{content:e,formRef:e.formRef})]})},e.key)}))}),Object(C.jsx)(f.a,{type:"primary",shape:"round",onClick:v,children:Object(C.jsxs)("div",{className:"flex items-center",children:[Object(C.jsx)(ca.a,{className:"mr-2"})," Add content"]})}),Object(C.jsx)(he.a,{}),Object(C.jsx)(f.a,{loading:d,danger:!0,type:"primary",shape:"round",className:"w-full",onClick:y,children:"Save course"})]})}function ia(e){return Object(C.jsx)("div",{children:Object(C.jsx)(na,{})})}function la(){var e=jt().authedUser.id,t=Object(r.useCallback)((function(t){return Me.search(Object(Y.a)(Object(Y.a)({},t),{},{creatorId:e}))}),[e]);return Object(C.jsx)("div",{children:Object(C.jsx)(xt,{fetchSource:t})})}function oa(e){var t=Number(e.match.params.courseId),a=O(Object(r.useCallback)((function(){return Me.getDetail(t)}),[t]));return a.loading||a.error||!a.data?Object(C.jsx)("div",{className:"flex justify-center items-center",children:Object(C.jsx)(se,{})}):Object(C.jsx)("div",{children:Object(C.jsx)(na,{course:a.data})})}function ua(e){var t=e.location;return Object(C.jsxs)("div",{children:[Object(C.jsxs)(B.a,{activeKey:t.pathname,onChange:function(t){return e.history.push(t)},children:[Object(C.jsx)(B.a.TabPane,{tab:"Dashboard"},"/teacher/dashboard"),Object(C.jsx)(B.a.TabPane,{tab:"Add course"},"/teacher/add-course")]}),Object(C.jsxs)(i.d,{children:[Object(C.jsx)(i.a,{exact:!0,path:"/teacher",to:"/teacher/dashboard"}),Object(C.jsx)(i.b,{path:"/teacher/dashboard",component:la}),Object(C.jsx)(i.b,{path:"/teacher/add-course",component:ia}),Object(C.jsx)(i.b,{path:"/teacher/edit-course/:courseId",component:oa})]})]})}function da(){var e=Object(r.useCallback)((function(e){return Me.search(Object(Y.a)(Object(Y.a)({},e),{},{onlyWatchList:!0}))}),[]);return Object(C.jsxs)("div",{children:[Object(C.jsxs)("h1",{className:"text-3xl text-red-400 flex items-center",children:[Object(C.jsx)(rt.a,{className:"mr-2"})," Your watch list"]}),Object(C.jsx)(xt,{fetchSource:e})]})}var ja=function(e){var t=e.component,a=e.roles,r=Object(ae.a)(e,["component","roles"]),c=jt(),s=c.authedUser,n=c.loading;return Object(C.jsx)(i.b,Object(Y.a)(Object(Y.a)({},r),{},{render:function(e){return n?Object(C.jsx)(se,{}):!F.isAuthed||a&&!a.includes(s.role)?Object(C.jsx)(i.a,{to:{pathname:"/auth/login",state:{redirect:e.location.pathname}}}):Object(C.jsx)(t,Object(Y.a)({},e))}}))};function ba(){var e=Object(i.g)();return Object(C.jsx)(ft.a,{status:"404",title:"Page not found",extra:[Object(C.jsx)(f.a,{type:"primary",shape:"round",onClick:function(){return e.push("/")},children:"Go to home page"},"home")]})}function ma(){return Object(C.jsxs)(i.d,{children:[Object(C.jsx)(i.b,{exact:!0,path:"/",component:Pt}),Object(C.jsx)(i.b,{path:"/auth",component:ee}),Object(C.jsx)(i.b,{path:"/courses",component:gt}),Object(C.jsx)(ja,{path:"/teacher",roles:[Q.TEACHER],component:ua}),Object(C.jsx)(ja,{path:"/profile",component:Kt}),Object(C.jsx)(ja,{path:"/watch-list",component:da}),Object(C.jsx)(ja,{path:"/enrollment",component:yt}),Object(C.jsx)(ja,{path:"/admin",roles:[Q.ADMIN],component:T}),Object(C.jsx)(i.b,{path:"*",component:ba})]})}function ha(){return Object(C.jsx)("div",{className:"flex w-full justify-center border-t",children:Object(C.jsx)("div",{className:"container p-5 flex justify-center items-center text-blue-400",children:Object(C.jsxs)("b",{children:[Oe()().year()," @ Fademy"]})})})}var xa=a(187);function Oa(e){var t=Object(i.g)();function a(e){t.push("/courses/".concat(e.id))}return Object(C.jsx)(v.a,{children:e.categories.map((function(e){return Object(C.jsx)(v.a.SubMenu,{title:e.name,onTitleClick:function(){return a(e)},children:e.children.map((function(e){return Object(C.jsx)(v.a.Item,{onClick:function(){return a(e)},children:e.name},e.id)}))},e.id)}))})}var pa=a(346),fa=a(687);function va(e){return Object(C.jsxs)(v.a,{children:[Object(C.jsx)(v.a.Item,{children:Object(C.jsxs)(pe.b,{to:"/profile",className:"flex items-center",children:[Object(C.jsx)(j.a,{})," Profile"]})}),Object(C.jsx)(v.a.Item,{children:Object(C.jsxs)(pe.b,{to:"/watch-list",className:"flex items-center",children:[Object(C.jsx)(ie.a,{})," Watch list"]})}),Object(C.jsx)(v.a.Item,{children:Object(C.jsxs)(pe.b,{to:"/enrollment",className:"flex items-center",children:[Object(C.jsx)(oe.a,{})," Enrollment"]})}),Object(C.jsx)(v.a.Item,{onClick:function(){return F.logout()},children:Object(C.jsxs)("div",{className:"flex items-center text-red-400",children:[Object(C.jsx)(fa.a,{})," Logout"]})})]})}function ga(){var e=Object(i.g)(),t=O(tt.all),a=Object(r.useMemo)((function(){return t.data?Object(C.jsx)(Oa,{categories:t.data}):Object(C.jsx)(C.Fragment,{children:"Loading..."})}),[t.data]),c=jt(),s=c.authedUser,n=c.loading,o=Object(r.useMemo)((function(){return Object(C.jsx)(va,{user:s})}),[s]),u=dt(),d=Object(l.a)(u,2),j=d[0],b=d[1],m=Xe(),h=m.renewCompKey;return Object(r.useEffect)((function(){h()}),[j.searchTerm,h]),Object(C.jsx)("div",{className:"w-full shadow h-16 fixed flex justify-center top-0 bg-white",style:{zIndex:10},children:Object(C.jsxs)("div",{className:"container flex items-center",children:[Object(C.jsxs)("div",{className:"flex w-full items-center",children:[Object(C.jsxs)(pe.b,{to:"/",className:"flex items-center",children:[Object(C.jsx)(ce,{}),Object(C.jsx)("b",{className:"ml-2 text-blue-400 text-xl",children:"Fademy"})]}),Object(C.jsx)(pe.c,{to:"/",exact:!0,className:"text-gray-400 hover:text-gray-700 mx-4",activeClassName:"text-gray-700",children:"Home"}),Object(C.jsx)(xa.a,{overlay:a,overlayClassName:"shadow",children:Object(C.jsxs)("div",{className:"cursor-pointer text-gray-400 hover:text-gray-700 flex items-center",children:["Categories ",Object(C.jsx)(pa.a,{})]})}),(null===s||void 0===s?void 0:s.role)===Q.TEACHER&&Object(C.jsx)(pe.c,{to:"/teacher",className:"text-gray-400 hover:text-gray-700 mx-4",activeClassName:"text-gray-700",children:"Teacher"}),(null===s||void 0===s?void 0:s.role)===Q.ADMIN&&Object(C.jsx)(pe.c,{to:"/admin",className:"text-gray-400 hover:text-gray-700 mx-4",activeClassName:"text-gray-700",children:"Admin"})]}),Object(C.jsxs)("div",{className:"ml-auto flex items-center",children:[Object(C.jsx)(L.a.Search,{allowClear:!0,defaultValue:j.searchTerm,placeholder:"Search courses...",className:"rounded mr-4",style:{width:"250px"},onSearch:function(t){b("SET_SEARCH_TERM",t),e.push("/courses/0")}},m.compKey),F.isAuthed?Object(C.jsx)(xa.a,{overlay:o,overlayClassName:"shadow",children:n?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(te.a,{className:"mr-1"})," Loading..."]}):Object(C.jsx)(f.a,{type:"primary",shape:"round",children:Object(C.jsxs)("div",{className:"flex items-center",children:[Object(C.jsx)("span",{className:"mr-2",children:null===s||void 0===s?void 0:s.email})," ",Object(C.jsx)(pa.a,{})]})})}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(pe.c,{to:"/auth/login",className:"text-gray-400 hover:text-gray-700 mr-4",activeClassName:"text-gray-700",children:"Login"}),Object(C.jsx)(pe.c,{to:"/auth/register",className:"text-gray-400 hover:text-gray-700",children:Object(C.jsx)(f.a,{shape:"round",type:"primary",children:"Get started"})})]})]})]})})}var Na=function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(ga,{}),Object(C.jsx)("div",{className:"mt-24 mb-12 flex w-full justify-center",children:Object(C.jsx)("div",{className:"container",children:Object(C.jsx)(ma,{})})}),Object(C.jsx)(ha,{})]})},ya=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,688)).then((function(t){var a=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,n=t.getTTFB;a(e),r(e),c(e),s(e),n(e)}))};var ka=a(219),wa=a(335),Aa=a.n(wa),Ea=a(336),Sa=a.n(Ea),Ca=a(337),Ia=a.n(Ca),Ta=a(338),Qa=a.n(Ta),Ba=(a(641),a(642),a(643),a(644),a(645),a(646),a(647),a(648),a(649));Object(ka.registerPlugin)(Aa.a,Sa.a,Ia.a,Qa.a,Ba),A.a.interceptors.request.use((function(e){var t=F.accessToken;return t?e.headers.Authorization="Bearer ".concat(t):k.includes(e.url)&&(window.location.pathname="/auth/login"),e})),A.a.interceptors.response.use((function(e){return e}),function(){var e=Object(x.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k.includes(t.config.url)){e.next=8;break}if(401!==(null===t||void 0===t||null===(a=t.response)||void 0===a?void 0:a.status)){e.next=8;break}return e.next=4,F.refreshAccessToken();case 4:if(!e.sent){e.next=6;break}return e.abrupt("return",A.a.request(t.config));case 6:return window.location.pathname="/auth/login",e.abrupt("return");case 8:throw t;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(pe.a,{children:Object(C.jsx)(ut,{children:Object(C.jsx)(Na,{})})})}),document.getElementById("root")),ya()}},[[652,1,2]]]);
//# sourceMappingURL=main.833743ca.chunk.js.map